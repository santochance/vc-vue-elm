(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Index"],{"0662":function(t,e,i){"use strict";var s=i("93df"),n=i.n(s);n.a},1598:function(t,e,i){"use strict";var s=i("6ee6"),n=i.n(s);n.a},1640:function(t,e,i){},"25d5":function(t,e,i){"use strict";var s=i("6ffb"),n=i.n(s);n.a},"2ab6":function(t,e,i){t.exports=i.p+"img/index-locate-fail.26764f19.gif"},"2df6":function(t,e,i){"use strict";var s=i("e933"),n=i.n(s);n.a},"2e90":function(t,e,i){"use strict";var s=i("d1b4"),n=i.n(s);n.a},"2fdb":function(t,e,i){"use strict";var s=i("5ca1"),n=i("d2c8"),a="includes";s(s.P+s.F*i("5147")(a),"String",{includes:function(t){return!!~n(this,t,a).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3391:function(t,e,i){"use strict";var s=i("a3c4"),n=i.n(s);n.a},"418e":function(t,e,i){"use strict";var s=i("8b3a"),n=i.n(s);n.a},"43be":function(t,e,i){"use strict";var s=i("9499"),n=i.n(s);n.a},4469:function(t,e,i){"use strict";var s=i("4cfd"),n=i.n(s);n.a},4732:function(t,e){var i=function(){return document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),s=function(){return document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),n=function(t,e,n){var a=function(){n&&n.apply(this,arguments),s(t,e,a)};i(t,e,a)};t.exports={on:i,off:s,once:n}},"4cfd":function(t,e,i){},5044:function(t,e,i){},5147:function(t,e,i){var s=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[s]=!1,!"/./"[t](e)}catch(t){}}return!0}},"529d":function(t,e,i){},5586:function(t,e,i){"use strict";var s=i("9ee9"),n=i.n(s);n.a},"5e71":function(t,e,i){},"5fa4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Page",{staticClass:"p-index",attrs:{header:!1,tabbar:"index"}},[s("div",[t.loaded?t._e():s("IndexSkeleton",{staticClass:"p-index__loading",attrs:{headerLoaded:t.locState>0,entriesLoaded:t.entriesLoaded,listLoaded:t.listLoaded}}),s("IndexHeader",{attrs:{"location-name":t.location.locationName,locating:0===t.locState,detecting:1===t.locState},on:{"click:address":t.chooseAddress}}),s("IndexSearch"),3!==t.locState?[t.entryGroupMap.main?s("IndexMainEntries",{attrs:{entries:t.entryGroupMap.main.entries}}):t._e(),t.bannerList&&t.bannerList.length?s("IndexBanners",{staticClass:"p-index__banner",attrs:{banners:t.bannerList}}):t._e(),s("div",{staticClass:"p-index__shoplist-title"},[t._v("推荐商家")]),s("IndexShopListFilter",{ref:"filter",attrs:{filterOptions:t.filterOptions},on:{submit:t.onSubmitFilters}}),t.listLoaded?[s("IndexShopList",{ref:"infinite",attrs:{items:t.restaurantList,state:t.restaurantListState},on:{infinite:t.onInifiniteScroll}})]:t._e()]:t._e()],2),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.backTopVisible,expression:"backTopVisible"}],staticClass:"p-index__back-top",on:{click:t.onBackTop}},[s("img",{attrs:{src:i("e6d9"),alt:""}})])]),3===t.locState?s("div",{staticClass:"p-index__locate-fail"},[s("img",{attrs:{src:i("2ab6"),alt:""}}),s("h3",[t._v("输入地址后才能订餐哦！")]),s("button",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.chooseAddress(e)}}},[t._v("手动选择地址")])]):t._e()],1)},n=[],a=i("a322"),r=(i("7f7f"),i("ac6a"),i("c93e")),o=(i("cadf"),i("551c"),i("097d"),i("5880")),l=i("408b"),c=i("8e17"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"shell"},[i("header",{staticClass:"shell__header",style:{visibility:t.headerLoaded?"hidden":"visible"}}),i("div",{staticClass:"shell__entries",style:{visibility:t.entriesLoaded?"hidden":"visible"}},[i("div",{staticClass:"shellAnimation b-index-entries__entries"},t._l(10,function(t){return i("div",{key:t,staticClass:"b-index-entries_entry"},[i("div",{staticClass:"b-index-entries_entry-icon"}),i("p",{staticClass:"b-index-entries_entry-title"})])}))]),i("div",{staticClass:"shell__list",style:{visibility:t.listLoaded?"hidden":"visible"}})])},u=[],h={name:"IndexSkeleton",components:{},props:{headerLoaded:Boolean,entriesLoaded:Boolean,listLoaded:Boolean},data:function(){return{}},computed:{visible:function(){return!this.headerLoaded||!this.entriesLoaded||!this.listLoaded}}},f=h,p=(i("bfd0"),i("2877")),v=Object(p["a"])(f,d,u,!1,null,"c720b3f0",null);v.options.__file="IndexSkeleton.vue";var m=v.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"b-header b-header__box"},[i("div",{staticClass:"b-header__content"},[i("div",{staticClass:"b-header__address",on:{click:t.onClickAddress}},[i("svg",{staticClass:"b-header__location-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 31"}},[i("path",{attrs:{fill:"#FFF","fill-rule":"evenodd",d:"M22.116 22.601c-2.329 2.804-7.669 7.827-7.669 7.827-.799.762-2.094.763-2.897-.008 0 0-5.26-4.97-7.643-7.796C1.524 19.8 0 16.89 0 13.194 0 5.908 5.82 0 13 0s13 5.907 13 13.195c0 3.682-1.554 6.602-3.884 9.406zM18 13a5 5 0 1 0-10 0 5 5 0 0 0 10 0z"}})]),i("span",{staticClass:"b-header__address-text ellipsis"},[t._v("\n        "+t._s(t.addressText)+"\n      ")]),i("svg",{staticClass:"b-header__dropdown-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 8"}},[i("path",{attrs:{fill:"#FFF","fill-rule":"evenodd",d:"M5.588 6.588c.78.78 2.04.784 2.824 0l5.176-5.176c.78-.78.517-1.412-.582-1.412H.994C-.107 0-.372.628.412 1.412l5.176 5.176z"}})])])])])},g=[],b=!1,y={name:"IndexHeader",components:{},props:{locationName:{type:String},detecting:{type:Boolean,default:!1},locating:{type:Boolean,default:!1}},data:function(){return{detectingText:"正在识别地址...",locatingText:"正在定位...",unknownText:"未知地址"}},computed:{addressText:function(){return this.locating?this.locatingText:this.detecting?this.detectingText:this.locationName||this.unknownText}},created:function(){b&&(window[this.$options.name]=this)},methods:{onClickAddress:function(){this.$emit("click:address")}}},x=y,C=(i("5586"),Object(p["a"])(x,_,g,!1,null,"92afb0d8",null));C.options.__file="IndexHeader.vue";var w=C.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-search b-search__box sticky-box"},[i("div",{staticClass:"b-search__search",attrs:{role:"button"}},[i("router-link",{staticClass:"b-search__content",attrs:{to:""}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-opacity":".38",d:"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z"}})]),i("span",[t._v("搜索饿了么商家、商品名称")])])],1)])},k=[],I={name:"IndexSearch",components:{},props:{},data:function(){return{}},computed:{},methods:{}},L=I,T=(i("4469"),Object(p["a"])(L,S,k,!1,null,"192979a2",null));T.options.__file="IndexSearch.vue";var P=T.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-index__main-entries b-entries b-entries__box"},[i("swipe",{staticClass:"b-entries__swipe",attrs:{auto:0,showIndicators:t.slicedEntries.length>1}},t._l(t.slicedEntries,function(e,s){return i("swipe-item",{key:s},[i("div",{staticClass:"b-entries__main-entries"},t._l(e,function(e){return i("router-link",{key:e.id,staticClass:"b-entries__main-entry",attrs:{to:""}},[i("div",{staticClass:"b-entries__main-entry-icon"},[i("img",{attrs:{src:t.$getImage(e.image_hash,t.mainEntryImgParam),alt:""}})]),i("p",{staticClass:"b-entries__main-entry-title"},[t._v(t._s(e.name))])])}))])}))],1)},E=[],A=i("ada1"),O={name:"IndexMainentries",components:{Swipe:A["Swipe"],SwipeItem:A["SwipeItem"]},props:{entries:{type:Array,default:function(){return[]}}},data:function(){return{mainEntryImgParam:"?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/"}},computed:{slicedEntries:function(){var t=this.entries;if(!t||!t.length)return t;var e,i=t.length,s=10,n=0,a=[];while(n<i)n%s===0&&a.push(e=[]),e.push(t[n++]);return a}},methods:{}},N=O,j=(i("3391"),i("1598"),Object(p["a"])(N,$,E,!1,null,"efd38bb2",null));j.options.__file="IndexMainEntries.vue";var M=j.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-index-shoplist"},[s("section",{directives:[{name:"show",rawName:"v-show",value:t.noDataTipVisible,expression:"noDataTipVisible"}],staticClass:"b-index-shoplist__nodata"},[s("img",{attrs:{src:i("c5cb"),alt:""}}),s("h3",[t._v("附近没有外卖商家")]),s("p",[t._v("饿了么正在以光速来到你身边")])]),s("IndexShopListView",{directives:[{name:"show",rawName:"v-show",value:t.items.length,expression:"items.length"}]},t._l(t.items,function(t){return s("IndexShopListItem",{key:t.id,attrs:{item:t.restaurant}})})),s("InfiniteScroll",{ref:"infiniteScroll",staticClass:"b-index-shoplist__infinite",attrs:{handler:t.infiniteScrollHandler,state:t.state}})],1)},D=[],B=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-index-listview b-index-listview__box"},[t._t("default")],2)}),F=[],q={name:"IndexShopListView",components:{},props:{},data:function(){return{}},computed:{},methods:{}},W=q,G=(i("b7d4"),Object(p["a"])(W,B,F,!1,null,"5d9ecab6",null));G.options.__file="IndexShopListView.vue";var R=G.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item?s("router-link",{staticClass:"b-item b-item__box",attrs:{to:{path:"/shop",query:{id:t.item.id}},tag:"div"}},[t.dislikeVisible?s("div",{staticClass:"b-item__mask",on:{click:function(e){e.stopPropagation(),t.dislikeVisible=!1}}},[s("div",{staticClass:"b-item__dislike-btn",on:{click:function(e){e.stopPropagation(),t.onDislike(t.item)}}},[t._v("不喜欢")])]):t._e(),s("div",{staticClass:"b-item__shop-info"},[s("div",{staticClass:"b-item__logo-wrap"},[t.item.is_new?s("div",{staticClass:"b-item__new-icon"},[s("span",[t._v("新店")])]):t._e(),s("img",{attrs:{src:t.$getImage(t.item.image_path,t.logoImgParam),alt:""}})]),s("div",{staticClass:"b-item__main-wrap"},[s("div",{staticClass:"b-item__info-line"},[s("h3",{staticClass:"b-item__shop-name"},[t.item.is_premium?s("Tag",{staticClass:"b-item__premium-icon"},[t._v("品牌")]):t._e(),s("span",{staticClass:"b-item__shop-name-text ellipsis"},[t._v(t._s(t.item.name))])],1),s("div",{staticClass:"b-item__support-wrap"},[t.item.recommend.is_ad?s("tag",{staticClass:"b-item__ad-icon"},[t._v(t._s(t.item.recommend.reason))]):t._e(),s("span",{staticClass:"b-item__omit-btn",on:{click:function(e){e.stopPropagation(),t.dislikeVisible=!0}}},[t._v("···")])],1)]),s("div",{staticClass:"b-item__info-line"},[s("div",{staticClass:"b-item__rating-misc-wrap"},[s("RatingStars",{staticClass:"b-item__stars",attrs:{value:t.item.rating}}),s("span",{staticClass:"b-item__rating"},[t._v(t._s(t.item.rating))]),s("span",{staticClass:"b-item__sales"},[t._v("月售"+t._s(t.item.recent_order_num)+"单")])],1),t.item.delivery_mode?s("div",{staticClass:"b-item__delivery"},[s("Tag",{staticClass:"b-item__delivery-tag",style:{backgroundColor:"#"+t.item.delivery_mode.color}},[t._v(t._s(t.item.delivery_mode.text))])],1):t._e()]),s("div",{staticClass:"b-item__info-line"},[s("div",{staticClass:"b-item__delivery-limit-wrap"},[s("span",[t._v("¥"+t._s(t.item.piecewise_agent_fee.rules[0].price)+"起送")]),s("span",{staticClass:"b-item__delivery-fee ellipsis"},[t._v("优惠配送费¥"+t._s(t.item.piecewise_agent_fee.rules[0].fee))])]),s("div",{staticClass:"b-item__time-distance-wrap"},[s("span",[t._v(t._s(t._f("formatDistance")(t.item.distance)))]),s("span",{staticClass:"b-item__delivery-time"},[t._v(t._s(t.item.order_lead_time)+"分钟")])])])])]),s("div",{staticClass:"b-item__tags-and-activities"},[s("div",{staticClass:"b-item__tag-line"},[t._l(t.supportTags,function(e,i){return s("Tag",{key:e.text+String(i)+t.item.id,staticClass:"b-item__support-tag"},[t._v(t._s(e.text))])}),t.recommendTag?s("span",{staticClass:"b-item__recommend-tag"},[s("img",{attrs:{src:t.recommendTagImg,alt:""}}),s("span",[t._v(t._s(t.recommendTag.text))])]):t._e()],2),t.item.activities?s("div",{staticClass:"b-item__activity-wrap"},[s("div",{staticClass:"b-item__activity-list"},t._l(t.item.activities,function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<2||!t.activityListCollapsed,expression:"idx < 2 || !activityListCollapsed"}],key:e.id+String(i),staticClass:"b-item__activity-item"},[s("tag",{staticClass:"b-item__activity-item-icon",style:{backgroundColor:"#"+e.icon_color}},[t._v(t._s(e.icon_name))]),s("span",{staticClass:"b-item__activity-item-text ellipsis"},[t._v(t._s(e.description))])],1)})),t.item.activities.length>2?s("div",{staticClass:"b-item__activity-btn",class:{"b-item__activity-btn_expanded":!t.activityListCollapsed},on:{click:function(e){return e.stopPropagation(),t.onToggleActivityList(e)}}},[s("span",[t._v(t._s(t.item.activities.length)+"个活动")]),s("img",{attrs:{src:i("81b3"),alt:""}})]):t._e()]):t._e()])]):t._e()},Y=[],z=i("5ea5"),J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-star"},[t._m(0),s("div",{staticClass:"b-star__active",style:{width:Math.round(t.value/5*100)+"%"}},[s("img",{attrs:{src:i("b0cc"),alt:""}})])])},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-star__gray"},[s("img",{attrs:{src:i("f6b6"),alt:""}})])}],Q=!1,U={name:"RatingStars",components:{},props:{value:{type:Number,default:5}},data:function(){return{}},computed:{},created:function(){Q&&(window[this.$options.name]=this)},methods:{}},X=U,Z=(i("0662"),Object(p["a"])(X,J,K,!1,null,"71b7eff4",null));Z.options.__file="RatingStars.vue";var tt=Z.exports,et={name:"IndexShopListItem",components:{Tag:z["a"],RatingStars:tt},filters:{formatDistance:function(t){return t>=1e3?Number(t/1e3).toFixed(2)+"km":t>=0?Number(t)+"m":""}},props:{item:{type:Object}},data:function(){return{activityListCollapsed:!0,dislikeVisible:!1,logoImgParam:"?imageMogr/format/webp/thumbnail/!130x130r/gravity/Center/crop/130x130/",recommendTagImg:"https://fuss10.elemecdn.com/a/c1/24c767ffa7fd296d3e2d6f01798c6png.png?imageMogr/format/webp/thumbnail/!20x20r/gravity/Center/crop/20x20/"}},computed:{supportTags:function(){try{return this.item.support_tags.filter(function(t){return"口碑人气好店"!==t.text})}catch(t){return[]}},recommendTag:function(){try{return this.item.support_tags.filter(function(t){return"口碑人气好店"===t.text})[0]}catch(t){return null}}},methods:{onToggleActivityList:function(){this.activityListCollapsed=!this.activityListCollapsed},onDislike:function(t){this.$emit("dislike",t),this.dislikeVisible=!1}}},it=et,st=(i("da8b"),Object(p["a"])(it,H,Y,!1,null,"28ffa3ed",null));st.options.__file="IndexShopListItem.vue";var nt=st.exports,at=i("854e"),rt=!0,ot={name:"IndexShopList",components:{IndexShopListView:R,IndexShopListItem:nt,InfiniteScroll:at["a"]},props:{items:{type:Array},state:{type:[String,Number]}},data:function(){return{}},created:function(){rt&&(window[this.$options.name]=this)},computed:{noDataTipVisible:function(){return"empty"===this.state}},methods:{infiniteScrollHandler:function(t){this.$emit("infinite",t)},reset:function(t){var e=this;this.$nextTick(function(){e.resetScroll(),e.$nextTick(function(){e.$refs.infiniteScroll.reset(t)})})},resetScroll:function(){var t=this.$el.getBoundingClientRect(),e=Math.round(t.top),i=parseFloat(this.$toRpx(180));if(e<i){rt&&console.log("<IndexShopList> should update scrollTop");var s=window.scrollY+e-i;document.documentElement.scrollTop=s}}}},lt=ot,ct=(i("f44b"),Object(p["a"])(lt,V,D,!1,null,"2bc6ba48",null));ct.options.__file="IndexShopList.vue";var dt=ct.exports,ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.banners&&t.banners.length?i("div",{staticClass:"p-index__banners b-banners"},[i("swipe",{staticClass:"b-banners__swipe"},t._l(t.banners,function(e){return i("swipe-item",{key:e.id,staticClass:"b-banners__swipe-item"},[i("img",{attrs:{src:t.$getImage(e.image_hash,t.bannerImgParam),alt:""}})])}))],1):t._e()},ht=[],ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mint-swipe"},[i("div",{ref:"wrap",staticClass:"mint-swipe-items-wrap"},[t._t("default")],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showIndicators,expression:"showIndicators"}],staticClass:"mint-swipe-indicators"},t._l(t.pages,function(e,s){return i("div",{key:s,staticClass:"mint-swipe-indicator",class:{"is-active":s===t.index}})}))])},pt=[],vt=i("4732"),mt=i("726a"),_t={name:"mt-swipe",created:function(){this.dragState={}},data:function(){return{ready:!1,dragging:!1,userScrolling:!1,animating:!1,index:0,pages:[],timer:null,reInitTimer:null,noDrag:!1}},props:{speed:{type:Number,default:300},defaultIndex:{type:Number,default:0},disabled:{type:Boolean,default:!1},auto:{type:Number,default:3e3},continuous:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},noDragWhenSingle:{type:Boolean,default:!0},prevent:{type:Boolean,default:!1},propagation:{type:Boolean,default:!1}},methods:{swipeItemCreated:function(){var t=this;this.ready&&(clearTimeout(this.reInitTimer),this.reInitTimer=setTimeout(function(){t.reInitPages()},100))},swipeItemDestroyed:function(){var t=this;this.ready&&(clearTimeout(this.reInitTimer),this.reInitTimer=setTimeout(function(){t.reInitPages()},100))},translate:function(t,e,i,s){var n=this,a=arguments;if(i){this.animating=!0,t.style.webkitTransition="-webkit-transform "+i+"ms ease-in-out",setTimeout(function(){t.style.webkitTransform="translate3d(".concat(e,"px, 0, 0)")},50);var r=!1,o=function(){r||(r=!0,n.animating=!1,t.style.webkitTransition="",t.style.webkitTransform="",s&&s.apply(n,a))};Object(vt["once"])(t,"webkitTransitionEnd",o),setTimeout(o,i+100)}else t.style.webkitTransition="",t.style.webkitTransform="translate3d(".concat(e,"px, 0, 0)")},reInitPages:function(){var t=this,e=this.$children;this.noDrag=1===e.length&&this.noDragWhenSingle;var i=[];this.index=this.defaultIndex,e.forEach(function(e,s){i.push(e.$el),Object(mt["removeClass"])(e.$el,"is-active"),s===t.defaultIndex&&Object(mt["addClass"])(e.$el,"is-active")}),this.pages=i},doAnimate:function(t,e){var i=this;if(0!==this.$children.length&&(e||!(this.$children.length<2))){var s,n,a,r,o,l,c=this.speed||300,d=this.index,u=this.pages,h=u.length;e&&"goto"!==t?(s=e.prevPage,a=e.currentPage,n=e.nextPage,r=e.pageWidth,o=e.offsetLeft):(e=e||{},r=this.$el.clientWidth,a=u[d],"goto"===t?(s=e.prevPage,n=e.nextPage):(s=u[d-1],n=u[d+1]),this.continuous&&u.length>1&&(s||(s=u[u.length-1]),n||(n=u[0])),s&&(s.style.display="block",this.translate(s,-r)),n&&(n.style.display="block",this.translate(n,r)));var f=this.$children[d].$el;"prev"===t?(d>0&&(l=d-1),this.continuous&&0===d&&(l=h-1)):"next"===t?(d<h-1&&(l=d+1),this.continuous&&d===h-1&&(l=0)):"goto"===t&&e.newIndex>-1&&e.newIndex<h&&(l=e.newIndex);var p=function(){if(void 0!==l){var t=i.$children[l].$el;Object(mt["removeClass"])(f,"is-active"),Object(mt["addClass"])(t,"is-active"),i.index=l,i.$emit("change",l,d)}s&&(s.style.display=""),n&&(n.style.display="")};setTimeout(function(){"next"===t?(i.translate(a,-r,c,p),n&&i.translate(n,0,c)):"prev"===t?(i.translate(a,r,c,p),s&&i.translate(s,0,c)):"goto"===t?s?(i.translate(a,r,c,p),i.translate(s,0,c)):n&&(i.translate(a,-r,c,p),i.translate(n,0,c)):(i.translate(a,0,c,p),"undefined"!==typeof o?(s&&o>0&&i.translate(s,-1*r,c),n&&o<0&&i.translate(n,r,c)):(s&&i.translate(s,-1*r,c),n&&i.translate(n,r,c)))},10)}},next:function(){this.doAnimate("next")},prev:function(){this.doAnimate("prev")},goto:function(t){this.index!==t&&(t<this.index?this.doAnimate("goto",{newIndex:t,prevPage:this.pages[t]}):this.doAnimate("goto",{newIndex:t,nextPage:this.pages[t]}))},doOnTouchStart:function(t){if(!this.noDrag&&!this.disabled){var e=this.$el,i=this.dragState,s=t.changedTouches?t.changedTouches[0]:t;i.startTime=new Date,i.startLeft=s.pageX,i.startTop=s.pageY,i.startTopAbsolute=s.clientY,i.pageWidth=e.offsetWidth,i.pageHeight=e.offsetHeight;var n=this.$children[this.index-1],a=this.$children[this.index],r=this.$children[this.index+1];this.continuous&&this.pages.length>1&&(n||(n=this.$children[this.$children.length-1]),r||(r=this.$children[0])),i.prevPage=n?n.$el:null,i.dragPage=a?a.$el:null,i.nextPage=r?r.$el:null,i.prevPage&&(i.prevPage.style.display="block"),i.nextPage&&(i.nextPage.style.display="block")}},doOnTouchMove:function(t){if(!this.noDrag&&!this.disabled){var e=this.dragState,i=t.changedTouches?t.changedTouches[0]:t;e.currentLeft=i.pageX,e.currentTop=i.pageY,e.currentTopAbsolute=i.clientY;var s=e.currentLeft-e.startLeft,n=e.currentTopAbsolute-e.startTopAbsolute,a=Math.abs(s),r=Math.abs(n);if(a<5||a>=5&&r>=1.73*a)this.userScrolling=!0;else{this.userScrolling=!1,t.preventDefault(),s=Math.min(Math.max(1-e.pageWidth,s),e.pageWidth-1);var o=s<0?"next":"prev";if(e.prevPage&&"prev"===o)this.translate(e.prevPage,s-e.pageWidth);else if(e.nextPage&&"next"===o)this.translate(e.nextPage,s+e.pageWidth);else{var l=e.pageWidth,c=s,d=6;s=-1/d/l*c*(Math.abs(c)-2*l)}this.translate(e.dragPage,s)}}},doOnTouchEnd:function(){if(!this.noDrag&&!this.disabled){var t=this.dragState,e=new Date-t.startTime,i=null,s=t.currentLeft-t.startLeft,n=t.currentTop-t.startTop,a=t.pageWidth,r=this.index,o=this.pages.length;if(e<300){var l=Math.abs(s)<5&&Math.abs(n)<5;(isNaN(s)||isNaN(n))&&(l=!0),l&&this.$children[this.index].$emit("tap")}e<300&&void 0===t.currentLeft||((e<300||Math.abs(s)>a/2)&&(i=s<0?"next":"prev"),this.continuous||(0===r&&"prev"===i||r===o-1&&"next"===i)&&(i=null),this.$children.length<2&&(i=null),this.doAnimate(i,{offsetLeft:s,pageWidth:t.pageWidth,prevPage:t.prevPage,currentPage:t.dragPage,nextPage:t.nextPage}),this.dragState={})}},dragStartEvent:function(t){this.prevent&&t.preventDefault(),this.propagation&&t.stopPropagation(),this.animating||(this.dragging=!0,this.userScrolling=!1,this.doOnTouchStart(t))},dragMoveEvent:function(t){this.dragging&&this.doOnTouchMove(t)},dragEndEvent:function(t){if(this.userScrolling)return this.dragging=!1,void(this.dragState={});this.dragging&&(this.doOnTouchEnd(t),this.dragging=!1)}},destroyed:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.reInitTimer&&(clearTimeout(this.reInitTimer),this.reInitTimer=null)},mounted:function(){var t=this;this.ready=!0,this.auto>0&&(this.timer=setInterval(function(){t.dragging||t.animating||t.next()},this.auto)),this.reInitPages();var e=this.$el;e.addEventListener("touchstart",this.dragStartEvent),e.addEventListener("touchmove",this.dragMoveEvent),e.addEventListener("touchend",this.dragEndEvent),e.addEventListener("mousedown",this.dragStartEvent),e.addEventListener("mousemove",this.dragMoveEvent),e.addEventListener("mouseup",this.dragEndEvent)}},gt=_t,bt=(i("2df6"),Object(p["a"])(gt,ft,pt,!1,null,null,null));bt.options.__file="swipe.vue";var yt=bt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mint-swipe-item"},[t._t("default")],2)},Ct=[],wt={name:"mt-swipe-item",mounted:function(){this.$parent&&this.$parent.swipeItemCreated(this)},destroyed:function(){this.$parent&&this.$parent.swipeItemDestroyed(this)}},St=wt,kt=Object(p["a"])(St,xt,Ct,!1,null,null,null);kt.options.__file="swipe-item.vue";var It=kt.exports,Lt=!1,Tt={name:"IndexBanners",components:{Swipe:yt,SwipeItem:It},props:{banners:{type:Array}},data:function(){return{bannerImgParam:"?imageMogr/format/webp/thumbnail/568x/"}},computed:{},created:function(){Lt&&(window[this.$options.name]=this)},methods:{}},Pt=Tt,$t=(i("25d5"),i("a94e"),Object(p["a"])(Pt,ut,ht,!1,null,"97d2b54e",null));$t.options.__file="IndexBanners.vue";var Et=$t.exports,At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-filter sticky-box"},[t.filterOptions?s("aside",{staticClass:"b-filter__box"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.sortDropdownVisible||t.filterDropdownVisible,expression:"sortDropdownVisible || filterDropdownVisible"}],staticClass:"b-filter__mask",on:{click:t.closeAllPanel}}),s("div",{staticClass:"b-filter__header"},[s("a",{staticClass:"b-filter__nav b-filter__nav-sorters ellipsis",class:{"b-filter__nav_active":t.checkSorterActive(t.insideSorterList,t.selectedSorter),"b-filter__nav_open":t.sortDropdownVisible},attrs:{href:"javascript:"},on:{click:t.onNavSorterClick}},[s("span",[t._v(t._s(t.selectedInsideSorterName))]),s("svg",{staticClass:"b-filter__dropdown-icon"},[s("use",{attrs:{"xlink:href":"#dropdown-icon"}})])]),t._l(t.outsideSorterList,function(e,i){return s("a",{key:e.name+i,staticClass:"b-filter__nav",class:{"b-filter__nav_active":t.checkSorterActive(e,t.selectedSorter)},attrs:{href:"javascript:"},on:{click:function(i){t.onSorterClick(e,"outside")}}},[s("span",[t._v(t._s(e.name))])])}),s("a",{staticClass:"b-filter__nav b-filter__nav-filters",class:{"b-filter__nav_active":t.checkSomeFilterSelected(),"b-filter__nav_open":t.filterDropdownVisible},attrs:{href:"javascript:"},on:{click:t.onNavFilterClick}},[s("span",[t._v("筛选")]),s("svg",{staticClass:"b-filter__more-filter-icon"},[s("use",{attrs:{"xlink:href":"#more-filter"}})])])],2),s("section",{staticClass:"b-filter__extend b-filter__extend-sorters",class:{"b-filter__extend_open":t.sortDropdownVisible}},[s("ul",t._l(t.insideSorterList,function(e,n){return s("li",{key:e.name+n,staticClass:"b-filter__sorter-item",class:{"b-filter__sorter-item_active":t.checkSorterActive(e,t.selectedSorter)},on:{click:function(i){t.onSorterClick(e)}}},[s("span",[t._v(t._s(e.name))]),s("img",{attrs:{src:i("8aba"),alt:""}})])}))]),s("section",{staticClass:"b-filter__extend b-filter__extend-filters",class:{"b-filter__extend_open":t.filterDropdownVisible}},[s("div",{staticClass:"b-filter__filter-selects"},[s("div",{staticClass:"b-filter__filter-select"},[s("div",{staticClass:"b-filter__filter-select-title"},[t._v("商家服务（可多选）")]),s("div",{staticClass:"b-filter__filter-options"},[t._l(t.deliverMode,function(e){return s("div",{key:e.id,staticClass:"b-filter__filter-option",class:{"b-filter__filter-option_active":t.checkFilterValueActive(e.id,t.filterPayload["delivery_mode"])},on:{click:function(i){t.filterPayload["delivery_mode"]=t.toggleArray(t.filterPayload["delivery_mode"],e.id)}}},[s("img",{staticClass:"b-filter__filter-option-icon",attrs:{src:t.$getImage(e.icon_hash,t.deliverModeIconParam)}}),s("span",{staticClass:"b-filter__filter-option-name"},[t._v(t._s(e.text))])])}),t._l(t.supportsGroup,function(e){return s("div",{key:e.id,staticClass:"b-filter__filter-option",class:{"b-filter__filter-option_active":t.checkFilterValueActive(e.id,t.filterPayload["support_ids"])},on:{click:function(i){t.filterPayload["support_ids"]=t.toggleArray(t.filterPayload["support_ids"],e.id)}}},[s("img",{staticClass:"b-filter__filter-option-icon",attrs:{src:t.$getImage(e.icon_hash,t.deliverModeIconParam)}}),s("span",{staticClass:"b-filter__filter-option-name"},[t._v(t._s(e.name))])])})],2)]),s("div",{staticClass:"b-filter__filter-select"},[s("div",{staticClass:"b-filter__filter-select-title"},[t._v("优惠活动（单选）")]),s("div",{staticClass:"b-filter__filter-options"},t._l(t.activityTypesGroup,function(e){return s("div",{key:e.id,staticClass:"b-filter__filter-option",class:{"b-filter__filter-option_active":t.checkFilterValueActive(e.id,t.filterPayload["activity_types"])},on:{click:function(i){t.filterPayload["activity_types"]=t.toggleValue(t.filterPayload["activity_types"],e.id)}}},[s("span",{staticClass:"b-filter__filter-option-name"},[t._v(t._s(e.name))])])}))]),s("div",{staticClass:"b-filter__filter-select"},[s("div",{staticClass:"b-filter__filter-select-title"},[t._v("人均消费")]),s("div",{staticClass:"b-filter__filter-options"},t._l(t.averageCostsGroup,function(e){return s("div",{key:e.id,staticClass:"b-filter__filter-option",class:{"b-filter__filter-option_active":t.checkFilterValueActive(e.id,t.filterPayload["cost_range"])},on:{click:function(i){t.filterPayload["cost_range"]=t.toggleValue(t.filterPayload["cost_range"],e.id)}}},[s("span",{staticClass:"b-filter__filter-option-name"},[t._v(t._s(e.description))])])}))])]),s("div",{staticClass:"b-filter__filter-btns"},[s("button",{staticClass:"b-filter__filter-btn b-filter__filter-btn-clear",on:{click:t.onFilterClear}},[t._v("清空")]),s("button",{staticClass:"b-filter__filter-btn b-filter__filter-btn-ok",on:{click:t.onFilterSubmit}},[t._v("确定")])])])]):t._e()])},Ot=[],Nt=i("6bde"),jt=(i("456d"),i("9393")),Mt=i("8afe"),Vt=!1,Dt={name:"IndexShopListFilter",components:{},props:{filterOptions:{type:Object}},data:function(){return{selectedInsideSorterName:"",selectedSorter:null,sortDropdownVisible:!1,filterDropdownVisible:!1,averageCostsGroupItems:[[null,20],[20,40],[40,60],[60,80],[80,100],[100,null]],filterPayload:{quality_union:null,order_by:null,delivery_mode:[],support_ids:[],activity_types:null,cost_range:null,cost_from:null,cost_to:null},deliverModeIconParam:"?imageMogr/format/webp/thumbnail/!24x24r/gravity/Center/crop/24x24/"}},computed:{insideSorterList:function(){try{return this.filterOptions.outside.inside_sort_filter}catch(t){return[]}},outsideSorterList:function(){try{return this.filterOptions.outside.outside_sort_filter}catch(t){return[]}},uniqueSorterKeys:function(){return this.insideSorterList.concat(this.outsideSorterList).reduce(function(t,e){return-1===t.indexOf(e.key)?Object(Mt["a"])(t).concat([e.key]):t},[])},filterGroupList:function(){return this.filterOptions.bar||{}},supportsGroup:function(){return this.filterGroupList["supports"]||[]},activityTypesGroup:function(){return this.filterGroupList["activity_types"]||[]},deliverMode:function(){var t=this.filterGroupList["delivery_mode"];return t?[t]:[]},averageCostsGroup:function(){var t=this.averageCostsGroupItems,e=function(t,e){return null==e?"¥".concat(t,"以上"):null==t?"¥".concat(e,"以下"):"¥".concat(t," - ¥").concat(e)};return t.map(function(t,i){var s=Object(jt["a"])(t,2),n=s[0],a=s[1];return{description:e(n,a),id:i+1,from:n,to:a}})}},watch:{"filterOptions.outside.inside_sort_filter":function(t){this.initSelectedInsideSorterName(t)},"filterPayload.cost_range":function(t){if(Vt&&console.log("filterPayload.cost_range changed"),null!==t){var e=this.averageCostsGroupItems[t-1];this.filterPayload["cost_from"]=e[0],this.filterPayload["cost_to"]=e[1]}else this.filterPayload["cost_from"]=null,this.filterPayload["cost_to"]=null},sortDropdownVisible:function(){this.watchModals()},filterDropdownVisible:function(){this.watchModals()}},created:function(){Vt&&(window[this.$options.name]=this),Vt&&console.log("<IndexShopListFilter> created"),this.initSelectedInsideSorterName(this.insideSorterList)},methods:{submit:function(){var t=this,e=["cost_range"],i=this.filterPayload;i=Object.keys(i).reduce(function(s,n){return-1!==e.indexOf(n)||t.isEmpty(i[n])||(s[n]=i[n]),s},{}),this.$emit("submit",i),Vt&&console.log("<IndexShopListFilter> request payload:",i)},initSelectedInsideSorterName:function(t){var e;try{e=t[0].name}catch(t){e=""}this.selectedInsideSorterName=e},onNavSorterClick:function(){var t=this.sortDropdownVisible;t||(this.stick(),this.filterDropdownVisible=!1),this.sortDropdownVisible=!t},onNavFilterClick:function(){var t=this.filterDropdownVisible;t||(this.stick(),this.sortDropdownVisible=!1),this.filterDropdownVisible=!t},onSorterClick:function(t,e){var i=this.filterPayload,s=this.uniqueSorterKeys.filter(function(e){return e!==t.key});s.forEach(function(t){return i[t]=null}),i[t.key]=this.toggleValue(i[t.key],t.value),this.filterPayload=Object(r["a"])({},i),this.selectedSorter=t,this.selectedInsideSorterName="outside"===e?(this.insideSorterList[0]||{}).name||"":t.name,this.closeAllPanel(),this.submit()},onFilterClear:function(){this.filterPayload=Object(r["a"])({},this.filterPayload,{delivery_mode:[],support_ids:[],activity_types:null,cost_range:null})},onFilterSubmit:function(){this.closeAllPanel(),this.submit()},closeAllPanel:function(){this.filterDropdownVisible=!1,this.sortDropdownVisible=!1},toggleValue:function(t,e,i){var s=i&&i.toggle||!0;return t===e?s&&(t=null):t=e,t},toggleArray:function(t,e,i){if(!Array.isArray(t))throw new TypeError("first argument must be an array!");var s=i&&i.toggle||!0,n=-1;return t.some(function(t,i){return t===e&&(n=i,!0)}),t=Object(Mt["a"])(t),-1!==n?s&&t.splice(n,1):t.push(e),t},checkSorterActive:function(t,e){if(!e)return!1;var i=function(t,e){return t.key===e.key&&t.value===e.value};return Array.isArray(t)?t.some(function(t){return i(t,e)}):i(t,e)},checkFilterValueActive:function(t,e){return!!e&&(Array.isArray(e)?-1!==e.indexOf(t):t===e)},checkSomeFilterSelected:function(){var t=this,e=this.filterPayload;return["delivery_mode","support_ids","activity_types","cost_range"].some(function(i){return!t.isEmpty(e[i])})},stick:function(){var t=this.$el.getBoundingClientRect(),e=Math.round(t.top),i=parseFloat(this.$toRpx(100));if(e>i){Vt&&console.log("<IndexShopListFilter> should update scrollTop");var s=window.scrollY+e-i;document.documentElement.scrollTop=s}},isEmpty:function(t){return null==t||("string"===typeof t&&!t||(!!(Array.isArray(t)&&t.length<=0)||"object"===Object(Nt["a"])(t)&&Object.keys(t).length<=0))},watchModals:function(){this.sortDropdownVisible||this.filterDropdownVisible?document.body.style.overflow="hidden":document.body.style.overflow=""}}},Bt=Dt,Ft=(i("eb3a"),Object(p["a"])(Bt,At,Ot,!1,null,"3c6da3bb",null));Ft.options.__file="IndexShopListFilter.vue";var qt=Ft.exports,Wt=function(){return i.e("Geohash").then(i.t.bind(null,"e02a",7))},Gt=function(){return i.e("ShopContainer").then(i.bind(null,"a06e"))},Rt=function(){return Promise.resolve().then(i.bind(null,"d223"))},Ht=!1,Yt={name:"Index",components:{IndexSkeleton:m,IndexHeader:w,IndexSearch:P,IndexShopList:dt,IndexMainEntries:M,IndexBanners:Et,IndexShopListFilter:qt,InfiniteScroll:at["a"],IndexShopListItem:nt},props:{},data:function(){return{entryGroupMap:{},bannerList:[],filterOptions:{},restaurantList:[],loaded:!1,locState:0,offset:0,rankId:"",filterPayload:null,selectAddressVisible:!1,backTopVisible:!1,entriesLoaded:!1,listLoaded:!1,restaurantListState:"loaded",favourImgParam:"?imageMogr/format/webp/thumbnail/!240x160r/gravity/Center/crop/240x160/",geohashChanged:!1}},computed:Object(r["a"])({},Object(o["mapState"])({location:function(t){return{longitude:t.longitude,latitude:t.latitude,geohash:t.geohash,locationName:t.locationName}}}),Object(o["mapState"])(["latitude","longitude","geohash","locationName"]),{favourEntries:function(){var t=(this.entryGroupMap["优惠专区类型"]||{}).entries;return t&&t.length?t.map(function(t){try{t.population=JSON.parse(t.more).population}catch(t){}return t}):t}}),watch:{geohash:function(t,e){t!==e&&(this.geohashChanged=!0)}},created:function(){var t=this;return Ht&&(window[this.$options.name]=this),Ht&&console.log("<Index> created"),this.loaded=!1,Promise.resolve().then(function(){return t.geohash?t.locationName?Promise.resolve().then(function(){t.locState=1}).then(function(){return t.loadData()}):t.callPoi({latitude:t.latitude,longitude:t.longitude}):t.locate()}).then(function(){return new Promise(function(t){return setTimeout(t,1e3)})}).then(function(){t.loaded=!0,t.$emit("load")},function(){t.loaded=!0,t.$emit("load")}).then(function(){Rt(),Wt(),Gt()})},activated:function(){Ht&&console.log("<Index> activated"),this.geohashChanged&&(this.geohashChanged=!1,this.onChangeAddress())},mounted:function(){var t=this;window.addEventListener("scroll",Object(c["a"])(function(){t.backTopVisible=window.scrollY>1800}),100)},updated:function(){this.$emit("updated:index",this.$data)},methods:Object(r["a"])({loadData:function(){var t=this;return this.locState=2,Promise.resolve().then(function(){t.fetchEntryList().then(function(){t.entriesLoaded=!0}),t.fetchBatchFilter().then(function(){t.listLoaded=!0}),t.fetchRestaurantList(),t.fetchBannerList()})},callPoi:function(t){var e=this;return this.locState=1,this.reverseGeoCoding(t).then(function(t){return t},function(t){return t}).then(function(){return e.loadData()})},locate:function(){var t=this;return this.locState=0,this.getCurrentPosition().then(function(e){var i=e.coords,s=i.latitude,n=i.longitude;return t.$store.commit("SAVE_LOCATION",{latitude:s,longitude:n,geohash:""}),t.callPoi(i)}).catch(function(){return Wt(),t.$store.commit("SET_LOCATION_NAME","未能获取地址"),Promise.resolve().then(function(){return new Promise(function(t){return setTimeout(t,2e3)})}).then(function(){return t.chooseAddress()}).then(function(){return new Promise(function(t){return setTimeout(t,800)})}).then(function(){t.locState=3})})},fetchEntryList:function(){var t=this;return Object(l["l"])({latitude:this.latitude,longitude:this.longitude}).then(function(e){t.entryGroupMap=e.reduce(function(t,e){return Object(r["a"])({},t,Object(a["a"])({},e.group_name,e))},{})})},fetchBannerList:function(){var t=this;return Object(l["b"])({latitude:this.latitude,longitude:this.longitude}).then(function(e){t.bannerList=e})},fetchBatchFilter:function(){var t=this;return Object(l["d"])({latitude:this.latitude,longitude:this.longitude}).then(function(e){t.filterOptions=e})},fetchRestaurantList:function(){var t=this;return this.restaurantListState="loading",Object(l["q"])(Object(r["a"])({latitude:this.latitude,longitude:this.longitude,offset:this.offset},this.filterPayload)).then(function(e){var i,s=e.items,n=e.rank_id;return 0===t.offset?t.restaurantList=s:t.restaurantList=t.restaurantList.concat(s),t.rankId=n,t.offset=t.restaurantList.length,i=t.offset?s.length?"loaded":"complete":"empty",t.restaurantListState=i}).catch(function(){return t.restaurantListState="loaded"})}},Object(o["mapActions"])(["reverseGeoCoding","getCurrentPosition"]),{chooseAddress:function(){this.$router.push("/index/address")},onSubmitFilters:function(t){this.filterPayload=t,this.offset=0,this.restaurantList=[],this.restaurantListState="loaded",this.$refs.infinite.reset()},onInifiniteScroll:function(){Ht&&console.log("<Index> handle infinite event"),this.fetchRestaurantList()},onChangeAddress:function(){this.offset=0,this.restaurantList=[],this.restaurantListState="loaded",this.$refs.infinite&&this.$refs.infinite.reset(!1),this.loadData()},closeSelectAddress:function(){this.$router.back()},onBackTop:function(){document.documentElement.scrollTop=0}})},zt=Yt,Jt=(i("89bb"),Object(p["a"])(zt,s,n,!1,null,"591a05bc",null));Jt.options.__file="Index.vue";var Kt=Jt.exports;i.d(e,"default",function(){return Kt})},6762:function(t,e,i){"use strict";var s=i("5ca1"),n=i("c366")(!0);s(s.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"6ee6":function(t,e,i){},"6ffb":function(t,e,i){},"726a":function(t,e){var i=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},s=function(t,e){if(!t||!e)return!1;if(-1!=e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1},n=function(t,e){if(t){for(var i=t.className,n=(e||"").split(" "),a=0,r=n.length;a<r;a++){var o=n[a];o&&(t.classList?t.classList.add(o):s(t,o)||(i+=" "+o))}t.classList||(t.className=i)}},a=function(t,e){if(t&&e){for(var n=e.split(" "),a=" "+t.className+" ",r=0,o=n.length;r<o;r++){var l=n[r];l&&(t.classList?t.classList.remove(l):s(t,l)&&(a=a.replace(" "+l+" "," ")))}t.classList||(t.className=i(a))}};t.exports={hasClass:s,addClass:n,removeClass:a}},"81b3":function(t,e,i){t.exports=i.p+"img/arrow.3b0b3f0f.svg"},"854e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"infinite",staticClass:"infinite-scroll"},[i("div",{staticClass:"infinite-scroll__trigger"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.triggerBarVisible,expression:"triggerBarVisible"}],staticClass:"infinite-scroll__loading"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loaded,expression:"!loaded"}],staticClass:"infinite-scroll__loading-default"},[t._m(0)])]),t.complete?i("div",{staticClass:"infinite-scroll__completed"},[t._v("没有更多了哦~")]):t._e()])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sk-fading-circle"},[i("div",{staticClass:"sk-circle1 sk-circle"}),i("div",{staticClass:"sk-circle2 sk-circle"}),i("div",{staticClass:"sk-circle3 sk-circle"}),i("div",{staticClass:"sk-circle4 sk-circle"}),i("div",{staticClass:"sk-circle5 sk-circle"}),i("div",{staticClass:"sk-circle6 sk-circle"}),i("div",{staticClass:"sk-circle7 sk-circle"}),i("div",{staticClass:"sk-circle8 sk-circle"}),i("div",{staticClass:"sk-circle9 sk-circle"}),i("div",{staticClass:"sk-circle10 sk-circle"}),i("div",{staticClass:"sk-circle11 sk-circle"}),i("div",{staticClass:"sk-circle12 sk-circle"})])}],a=!1,r={name:"InfiniteScroll",components:{},props:{handler:{type:Function},state:{type:String}},data:function(){return{loaded:!0,complete:!1,empty:!1,elBottom:null,vpBottom:null,touched:!1}},computed:{triggerBarVisible:function(){return!this.complete||!this.empty}},watch:{state:function(t,e){t!==e&&this.setState(t)}},created:function(){window.addEventListener("scroll",this.scrollHandler),window.addEventListener("resize",this.scrollHandler),this.setState(this.state)},activated:function(){},deactivated:function(){},destroyed:function(){window.removeEventListener("scroll",this.scrollHandler),window.addEventListener("resize",this.scrollHandler)},methods:{scrollHandler:function(){var t=this;if(this.loaded&&!this.complete&&!this.empty){var e=this.$refs.infinite,i=e.getBoundingClientRect(),s=Math.round(i.bottom),n=window.innerHeight,r=s-n<=50;this.elBottom=s,this.vpBottom=n,this.touched=r,a&&console.log("<InfiniteScroll> shouldHandle"),r&&this.handler&&(this.$emit("infinite"),a&&console.log("<InfiniteScroll> trigger infinite"),this.setState("loading"),this.handler(function(e){t.setState(e)}))}},reset:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loaded=!0,this.complete=!1,this.empty=!1,t&&this.scrollHandler()},setState:function(t){"loading"===t?(this.loaded=!1,this.complete=!1,this.empty=!1):"loaded"===t?(this.loaded=!0,this.complete=!1,this.empty=!1,this.$emit("loaded")):"complete"===t?(this.loaded=!0,this.complete=!0,this.empty=!1,this.$emit("complete")):"empty"===t&&(this.loaded=!0,this.complete=!1,this.empty=!0,this.$emit("empty"))}}},o=r,l=(i("43be"),i("2e90"),i("2877")),c=Object(l["a"])(o,s,n,!1,null,"28764ee4",null);c.options.__file="InfiniteScroll.vue";var d=c.exports;i.d(e,"a",function(){return d})},"89aa":function(t,e,i){},"89bb":function(t,e,i){"use strict";var s=i("8fba"),n=i.n(s);n.a},"8aba":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAkFJREFUSA3tlbtrVFEQxr/JusEkdqYR0mU3EGyECCKCIEIghIgSfBSCCkbwWqTQykoQ41+QbHaRRC0MSDCgjeADO0ERQRBB10YsU/gC89jd8ZuNez17H7gmN2BxT7Fnzpw587vzzbl3gXSkCqQKJKSAJJQnlKb3huawjDkCZj94KIiIukGbAs5P636t4h5J2w1GyHz5ghx1wW3uIgm7b0pPaQ2PHOg3tGEimDsxsKpKbkonqoqbqmivgwRLksFI+by8DoITkXqgqJ1fq7hN4GgDwMQVajxa9uR+w+fOW9zFeuz+ou74UoEl3+2fFyilPPs+BmpxkVLnpnVvflLHTT4/WYSRL+mu1QpecOsPlAseukTorYgjviuU2F4DWcFzytbNqCfSjtPlMfnsn/htsJ+HoLjDS9Tl7ongOuW97Pqi7FDFslzvlUFtHNRVvOkr6Im15dpvb0Ev8sEWglCWWmoFallCFeeLuqdWxVNW0+nCaM9JB8bxE9cIHAvsWaL5kx6OXxGpBfei1iGwBeUmdYTdXSA84x6ijCv+q9K0gcdbuzH89hib1OIISW3n+JV5wMkL5oiBviT0yL9ALW8k2DY+elLidNXsuEEF3mW7METoj7iYOH+k1G4wb+8MKz3j+uq24JNksS/qxodiIxyxFTdie/pxjk/3sLG2mZUu8sszuF5oPYebMM7eeVe3LS3iGS/bAKHfeasPsBWv4uJb8f+1YktiPezIYth6mhEc3ii0lQdriuGfQbbJkS5SBf5HBX4Bvl6o9YDxgOsAAAAASUVORK5CYII="},"8b3a":function(t,e,i){},"8fba":function(t,e,i){},"93df":function(t,e,i){},9499:function(t,e,i){},"9ee9":function(t,e,i){},a3c4:function(t,e,i){},a94e:function(t,e,i){"use strict";var s=i("e545"),n=i.n(s);n.a},ada1:function(t,e){t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"mt-swipe-item",mounted:function(){this.$parent&&this.$parent.swipeItemCreated(this)},destroyed:function(){this.$parent&&this.$parent.swipeItemDestroyed(this)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(7),n=i(6);e.default={name:"mt-swipe",created:function(){this.dragState={}},data:function(){return{ready:!1,dragging:!1,userScrolling:!1,animating:!1,index:0,pages:[],timer:null,reInitTimer:null,noDrag:!1}},props:{speed:{type:Number,default:300},defaultIndex:{type:Number,default:0},disabled:{type:Boolean,default:!1},auto:{type:Number,default:3e3},continuous:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},noDragWhenSingle:{type:Boolean,default:!0},prevent:{type:Boolean,default:!1},propagation:{type:Boolean,default:!1}},methods:{swipeItemCreated:function(){var t=this;this.ready&&(clearTimeout(this.reInitTimer),this.reInitTimer=setTimeout(function(){t.reInitPages()},100))},swipeItemDestroyed:function(){var t=this;this.ready&&(clearTimeout(this.reInitTimer),this.reInitTimer=setTimeout(function(){t.reInitPages()},100))},translate:function(t,e,i,n){var a=this,r=arguments;if(i){this.animating=!0,t.style.webkitTransition="-webkit-transform "+i+"ms ease-in-out",setTimeout(function(){t.style.webkitTransform="translate3d("+e+"px, 0, 0)"},50);var o=!1,l=function(){o||(o=!0,a.animating=!1,t.style.webkitTransition="",t.style.webkitTransform="",n&&n.apply(a,r))};(0,s.once)(t,"webkitTransitionEnd",l),setTimeout(l,i+100)}else t.style.webkitTransition="",t.style.webkitTransform="translate3d("+e+"px, 0, 0)"},reInitPages:function(){var t=this,e=this.$children;this.noDrag=1===e.length&&this.noDragWhenSingle;var i=[];this.index=this.defaultIndex,e.forEach(function(e,s){i.push(e.$el),(0,n.removeClass)(e.$el,"is-active"),s===t.defaultIndex&&(0,n.addClass)(e.$el,"is-active")}),this.pages=i},doAnimate:function(t,e){var i=this;if(0!==this.$children.length&&(e||!(this.$children.length<2))){var s,a,r,o,l,c,d=this.speed||300,u=this.index,h=this.pages,f=h.length;e&&"goto"!==t?(s=e.prevPage,r=e.currentPage,a=e.nextPage,o=e.pageWidth,l=e.offsetLeft):(e=e||{},o=this.$el.clientWidth,r=h[u],"goto"===t?(s=e.prevPage,a=e.nextPage):(s=h[u-1],a=h[u+1]),this.continuous&&h.length>1&&(s||(s=h[h.length-1]),a||(a=h[0])),s&&(s.style.display="block",this.translate(s,-o)),a&&(a.style.display="block",this.translate(a,o)));var p=this.$children[u].$el;"prev"===t?(u>0&&(c=u-1),this.continuous&&0===u&&(c=f-1)):"next"===t?(u<f-1&&(c=u+1),this.continuous&&u===f-1&&(c=0)):"goto"===t&&e.newIndex>-1&&e.newIndex<f&&(c=e.newIndex);var v=function(){if(void 0!==c){var t=i.$children[c].$el;(0,n.removeClass)(p,"is-active"),(0,n.addClass)(t,"is-active"),i.index=c,i.$emit("change",c,u)}s&&(s.style.display=""),a&&(a.style.display="")};setTimeout(function(){"next"===t?(i.translate(r,-o,d,v),a&&i.translate(a,0,d)):"prev"===t?(i.translate(r,o,d,v),s&&i.translate(s,0,d)):"goto"===t?s?(i.translate(r,o,d,v),i.translate(s,0,d)):a&&(i.translate(r,-o,d,v),i.translate(a,0,d)):(i.translate(r,0,d,v),void 0!==l?(s&&l>0&&i.translate(s,-1*o,d),a&&l<0&&i.translate(a,o,d)):(s&&i.translate(s,-1*o,d),a&&i.translate(a,o,d)))},10)}},next:function(){this.doAnimate("next")},prev:function(){this.doAnimate("prev")},goto:function(t){this.index!==t&&(t<this.index?this.doAnimate("goto",{newIndex:t,prevPage:this.pages[t]}):this.doAnimate("goto",{newIndex:t,nextPage:this.pages[t]}))},doOnTouchStart:function(t){if(!this.noDrag&&!this.disabled){var e=this.$el,i=this.dragState,s=t.changedTouches?t.changedTouches[0]:t;i.startTime=new Date,i.startLeft=s.pageX,i.startTop=s.pageY,i.startTopAbsolute=s.clientY,i.pageWidth=e.offsetWidth,i.pageHeight=e.offsetHeight;var n=this.$children[this.index-1],a=this.$children[this.index],r=this.$children[this.index+1];this.continuous&&this.pages.length>1&&(n||(n=this.$children[this.$children.length-1]),r||(r=this.$children[0])),i.prevPage=n?n.$el:null,i.dragPage=a?a.$el:null,i.nextPage=r?r.$el:null,i.prevPage&&(i.prevPage.style.display="block"),i.nextPage&&(i.nextPage.style.display="block")}},doOnTouchMove:function(t){if(!this.noDrag&&!this.disabled){var e=this.dragState,i=t.changedTouches?t.changedTouches[0]:t;e.currentLeft=i.pageX,e.currentTop=i.pageY,e.currentTopAbsolute=i.clientY;var s=e.currentLeft-e.startLeft,n=e.currentTopAbsolute-e.startTopAbsolute,a=Math.abs(s),r=Math.abs(n);if(a<5||a>=5&&r>=1.73*a)this.userScrolling=!0;else{this.userScrolling=!1,t.preventDefault();var o=(s=Math.min(Math.max(1-e.pageWidth,s),e.pageWidth-1))<0?"next":"prev";if(e.prevPage&&"prev"===o)this.translate(e.prevPage,s-e.pageWidth);else if(e.nextPage&&"next"===o)this.translate(e.nextPage,s+e.pageWidth);else{var l=e.pageWidth,c=s;s=-1/6/l*c*(Math.abs(c)-2*l)}this.translate(e.dragPage,s)}}},doOnTouchEnd:function(){if(!this.noDrag&&!this.disabled){var t=this.dragState,e=new Date-t.startTime,i=null,s=t.currentLeft-t.startLeft,n=t.currentTop-t.startTop,a=t.pageWidth,r=this.index,o=this.pages.length;if(e<300){var l=Math.abs(s)<5&&Math.abs(n)<5;(isNaN(s)||isNaN(n))&&(l=!0),l&&this.$children[this.index].$emit("tap")}e<300&&void 0===t.currentLeft||((e<300||Math.abs(s)>a/2)&&(i=s<0?"next":"prev"),this.continuous||(0===r&&"prev"===i||r===o-1&&"next"===i)&&(i=null),this.$children.length<2&&(i=null),this.doAnimate(i,{offsetLeft:s,pageWidth:t.pageWidth,prevPage:t.prevPage,currentPage:t.dragPage,nextPage:t.nextPage}),this.dragState={})}},dragStartEvent:function(t){this.prevent&&t.preventDefault(),this.propagation&&t.stopPropagation(),this.animating||(this.dragging=!0,this.userScrolling=!1,this.doOnTouchStart(t))},dragMoveEvent:function(t){this.dragging&&this.doOnTouchMove(t)},dragEndEvent:function(t){if(this.userScrolling)return this.dragging=!1,void(this.dragState={});this.dragging&&(this.doOnTouchEnd(t),this.dragging=!1)}},destroyed:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.reInitTimer&&(clearTimeout(this.reInitTimer),this.reInitTimer=null)},mounted:function(){var t=this;this.ready=!0,this.auto>0&&(this.timer=setInterval(function(){t.dragging||t.animating||t.next()},this.auto)),this.reInitPages();var e=this.$el;e.addEventListener("touchstart",this.dragStartEvent),e.addEventListener("touchmove",this.dragMoveEvent),e.addEventListener("touchend",this.dragEndEvent),e.addEventListener("mousedown",this.dragStartEvent),e.addEventListener("mousemove",this.dragMoveEvent),e.addEventListener("mouseup",this.dragEndEvent)}}},function(t,e,i){"use strict";function s(t,e,i,s,n,a,r,o){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),a&&(d._scopeId=a),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=c):n&&(c=o?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(d.functional){d._injectStyles=c;var u=d.render;d.render=function(t,e){return c.call(e),u(t,e)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:d}}i.d(e,"a",function(){return s})},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n});var s=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mint-swipe-item"},[this._t("default")],2)},n=[]},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mint-swipe"},[i("div",{ref:"wrap",staticClass:"mint-swipe-items-wrap"},[t._t("default")],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showIndicators,expression:"showIndicators"}],staticClass:"mint-swipe-indicators"},t._l(t.pages,function(e,s){return i("div",{key:s,staticClass:"mint-swipe-indicator",class:{"is-active":s===t.index}})}))])},n=[]},function(t,e,i){"use strict";i.r(e);var s=i(0),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);var r=i(3),o=i(2),l=Object(o.a)(n.a,r.a,r.b,!1,null,null,null);e.default=l.exports},function(t,e,i){"use strict";var s=function(t,e){if(!t||!e)return!1;if(-1!=e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1};t.exports={hasClass:s,addClass:function(t,e){if(t){for(var i=t.className,n=(e||"").split(" "),a=0,r=n.length;a<r;a++){var o=n[a];o&&(t.classList?t.classList.add(o):s(t,o)||(i+=" "+o))}t.classList||(t.className=i)}},removeClass:function(t,e){if(t&&e){for(var i=e.split(" "),n=" "+t.className+" ",a=0,r=i.length;a<r;a++){var o=i[a];o&&(t.classList?t.classList.remove(o):s(t,o)&&(n=n.replace(" "+o+" "," ")))}t.classList||(t.className=(n||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))}}}},function(t,e,i){"use strict";var s=document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)},n=document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)};t.exports={on:s,off:n,once:function(t,e,i){s(t,e,function s(){i&&i.apply(this,arguments),n(t,e,s)})}}},function(t,e,i){"use strict";i.r(e);var s=i(1),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);var r=i(4),o=i(2),l=function(t){i(14)},c=Object(o.a)(n.a,r.a,r.b,!1,l,null,null);e.default=c.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwipeItem=e.Swipe=void 0;var s=a(i(8)),n=a(i(5));function a(t){return t&&t.__esModule?t:{default:t}}e.Swipe=s.default,e.SwipeItem=n.default},,,,,function(t,e){}])},ae25:function(t,e,i){"use strict";var s=i("529d"),n=i.n(s);n.a},b0cc:function(t,e,i){t.exports=i.p+"img/stars-active.77db2273.svg"},b7d4:function(t,e,i){"use strict";var s=i("1640"),n=i.n(s);n.a},bfd0:function(t,e,i){"use strict";var s=i("5044"),n=i.n(s);n.a},c5cb:function(t,e,i){t.exports=i.p+"img/index-no-result.2508019f.gif"},d1b4:function(t,e,i){},d223:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{staticClass:"p-select-address p-select-address__box",attrs:{title:"选择收货地址","back-default":!1},on:{back:t.onBack}},[i("div",{staticClass:"p-select-address__search-bar"},[i("div",{staticClass:"p-select-address__city-btn",on:{click:function(e){return e.stopPropagation(),t.chooseCity(e)}}},[i("span",{staticClass:"p-select-address__city-name ellipsis"},[t._v(t._s(t.cityName))]),i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 8"}},[i("path",{attrs:{fill:"#333","fill-rule":"evenodd",d:"M5.588 6.588c.78.78 2.04.784 2.824 0l5.176-5.176c.78-.78.517-1.412-.582-1.412H.994C-.107 0-.372.628.412 1.412l5.176 5.176z"}})])]),i("div",{staticClass:"p-select-address__search-box"},[i("svg",{staticClass:"p-select-address__search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-opacity":".38",d:"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"p-select-address__input",attrs:{type:"search",placeholder:"请输入地址"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})])]),i("section",{directives:[{name:"show",rawName:"v-show",value:!t.resultListVisible,expression:"!resultListVisible"}],staticClass:"p-select-address__section"},[i("h4",[t._v("当前地址")]),i("div",{staticClass:"p-select-address__current",on:{click:function(e){return e.stopPropagation(),t.selectCurrentAddress(e)}}},[i("span",{staticClass:"ellipsis"},[t._v(t._s(t.currentAddress.name))]),i("span",{staticClass:"p-select-address__relocate",on:{click:function(e){return e.stopPropagation(),t.reLocate(e)}}},[i("svg",{class:{"p-select-address__reloading":t.reloading},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"}},[i("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[i("circle",{attrs:{cx:"7.5",cy:"7.5",r:"7",stroke:"#2395FF"}}),i("path",{attrs:{fill:"#2395FF",d:"M7 0h1v5H7zM7 10h1v5H7zM10 7h5v1h-5zM0 7h5v1H0z"}})])]),i("span",[t._v("重新定位")])])])]),i("section",{directives:[{name:"show",rawName:"v-show",value:t.addressListVisible,expression:"addressListVisible"}],staticClass:"p-select-address__section"},[i("h4",[t._v("收货地址")]),i("div",{staticClass:"p-select-address__address-list"},t._l(t.addressList,function(e){return i("div",{key:e.id,staticClass:"p-select-address__address-item",on:{click:function(i){i.stopPropagation(),t.select(e)}}},[i("div",{staticClass:"p-select-address__address-line"},[i("span",{staticClass:"p-select-address__address-name"},[t._v(t._s(e.name))]),i("span",{staticClass:"p-select-address__address-sex"},[t._v(t._s(["先生","女士"][e.sex-1]))]),i("span",[t._v(t._s(e.phone))])]),i("div",{staticClass:"p-select-address__address-address"},[i("span",[t._v(t._s(e.address))])])])}))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.resultListVisible,expression:"resultListVisible"}],staticClass:"p-select-address__result-list"},[t._l(t.results,function(e){return i("div",{key:e.id,staticClass:"p-select-address__result-item",on:{click:function(i){i.stopPropagation(),t.select(e)}}},[i("div",{staticClass:"p-select-address__result-info"},[i("div",{staticClass:"p-select-address__result-name"},[t._v(t._s(e.name))]),i("div",{staticClass:"p-select-address__result-address"},[t._v(t._s(e.address))])]),i("div",{staticClass:"p-select-address__result-distance"},[t._v(t._s(e.distance))])])}),i("div",{staticClass:"p-select-address__result-tip"},[i("p",[t._v("找不到地址？")]),i("p",[t._v("请尝试只输入小区、写字楼或学校名")]),i("p",[t._v("详细地址（如门牌号）可稍后输入")])])],2),i("IndexSelectCity",{directives:[{name:"show",rawName:"v-show",value:t.selectCityVisible,expression:"selectCityVisible"}],staticClass:"p-select-address__select-city",attrs:{"city-data":t.cityList,"default-name":t.cityName},on:{change:t.onChangeCity,back:function(e){t.$router.back()}}})],1)},n=[],a=(i("7f7f"),i("386d"),i("a481"),i("c93e")),r=i("5880"),o=i("408b"),l=i("4579"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{staticClass:"b-select-city b-select-city__box",attrs:{title:"城市选择","back-default":!1},on:{back:t.onBack}},[i("section",{staticClass:"b-select-city__search"},[i("svg",{staticClass:"b-select-city__search-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-opacity":".38",d:"M14.778 13.732a.739.739 0 1 1-1.056 1.036l-2.515-2.565a.864.864 0 0 1-.01-1.206 4.894 4.894 0 0 0 1.357-3.651c-.126-2.492-2.156-4.52-4.648-4.647a4.911 4.911 0 0 0-5.16 5.163c.126 2.475 2.13 4.496 4.605 4.642.451.026.896-.008 1.326-.1a.739.739 0 0 1 .308 1.446c-.56.12-1.137.164-1.72.13-3.227-.19-5.83-2.815-5.995-6.042a6.39 6.39 0 0 1 6.71-6.715c3.25.165 5.884 2.8 6.05 6.048a6.37 6.37 0 0 1-1.374 4.3l2.12 2.161z"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"b-select-city__input",attrs:{type:"search",placeholder:"输入城市名、拼音或首字母查询"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t.cityData?[i("section",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],ref:"city",staticClass:"b-select-city__content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.cityName,expression:"cityName"}],staticClass:"b-select-city__section"},[i("h2",{staticClass:"b-select-city__section-title"},[t._v("当前定位城市")]),i("div",{staticClass:"b-select-city__city-item",on:{click:function(e){return e.stopPropagation(),t.onBack(e)}}},[t._v(t._s(t.cityName))])]),t._l(t.cityData.cityList,function(e){return i("div",{key:e.idx,staticClass:"b-select-city__section",attrs:{id:e.idx}},[i("h2",{staticClass:"b-select-city__section-title"},[t._v(t._s(e.idx))]),t._l(e.cities,function(e){return i("div",{key:e.id,staticClass:"b-select-city__city-item"},[i("span",{on:{click:function(i){t.onSelectCity(e)}}},[t._v(t._s(e.name))])])})],2)}),i("aside",{staticClass:"b-select-city__sidebar"},t._l(t.cityData.alphabet,function(e){return i("span",{key:e,on:{click:function(i){t.jump(e)}}},[t._v(t._s(e))])}))],2)]:t._e(),i("section",{directives:[{name:"show",rawName:"v-show",value:t.query&&t.results.length,expression:"query && results.length"}],staticClass:"b-select-city__search-result"},t._l(t.results,function(e){return i("div",{key:e.id,staticClass:"b-select-city__city-item"},[i("span",{on:{click:function(i){t.onSelectCity(e)}}},[t._v(t._s(e.name))])])})),i("section",{directives:[{name:"show",rawName:"v-show",value:t.query&&!t.results.length,expression:"query && !results.length"}],staticClass:"b-select-city__no-result"},[i("span",[t._v("无结果")])])],2)},d=[],u=(i("6762"),i("2fdb"),i("8afe")),h=!1,f={name:"IndexSelectCity",components:{Page:l["a"]},props:{defaultName:{type:String},cityData:{type:Object}},data:function(){return{query:"",currentCity:{},results:[]}},computed:{flatCityList:function(){return this.cityData.cityList.reduce(function(t,e){return Object(u["a"])(t).concat(Object(u["a"])(e.cities))},[])},cityName:function(){return this.currentCity&&this.currentCity.name||this.defaultName}},created:function(){h&&(window[this.$options.name]=this)},watch:{query:function(t){t&&(this.results=this.flatCityList.filter(function(e){return e.name.includes(t)||e.pinyin.includes(t.toLowerCase())}))}},methods:{onSelectCity:function(t){this.query="",this.currentCity.id!==t.id&&(this.currentCity=t,this.$emit("change",t)),this.onBack()},jump:function(t){var e=document.getElementById(t);if(e.scrollIntoView)return e.scrollIntoView();var i=this.$refs.city,s=i.getBoundingClientRect(),n=e.getBoundingClientRect();i.scrollTop+=n.top-s.top},onBack:function(){this.$emit("back")}}},p=f,v=(i("ae25"),i("2877")),m=Object(v["a"])(p,c,d,!1,null,"c37ac5cc",null);m.options.__file="IndexSelectCity.vue";var _=m.exports,g=i.e("Geohash").then(i.t.bind(null,"e02a",7)).then(function(t){g=t}),b=!1,y={name:"IndexSelectAddress",components:{Page:l["a"],IndexSelectCity:_},props:{visible:{type:Boolean,default:!1}},data:function(){return{query:"",addressList:[],results:[],currentAddress:{name:"正在定位...",latitude:null,longitude:null,geohash:"",valid:!1},currentCity:{latitude:this.$store.state.latitude,longitude:this.$store.state.longitude,city_id:this.$store.state.cityId},cityNameResolved:!1,loaded:!1,reloading:!1,emptyTip:{img:"no-log",title:"没有搜索结果",content:"换个关键字试试"}}},computed:Object(a["a"])({},Object(r["mapState"])(["useId","locationName","cityList"]),{resultListVisible:function(){return this.query&&this.results.length},addressListVisible:function(){return!this.resultListVisible&&this.addressList.length},cityName:function(){return this.cityNameResolved?(this.$store.state.cityName||"").replace(/市$/,"")||"选择...":"定位中"},selectCityVisible:function(){return"#city"===this.$route.hash}}),watch:{query:function(t,e){b&&console.log("query:",t),t&&t!==e&&this.search(t),t||(this.results=[])}},created:function(){b&&(window[this.$options.name]=this),this.init()},activated:function(){this.init()},methods:Object(a["a"])({init:function(){var t=this;return this.cityNameResolved=!1,Promise.resolve().then(function(){t.fetchAddressList()}).then(function(){return new Promise(function(t){return setTimeout(t,300)})}).then(function(){t.reverseGeoCoding(t.currentCity).then(function(e){var i=e.city;t.$store.commit("SET_CITY_NAME",i)},function(){}).then(function(){t.cityNameResolved=!0},function(){t.cityNameResolved=!1}),t.reLocate()}).then(function(){return new Promise(function(t){return setTimeout(t,300)})}).then(function(){t.getCityList()})},fetchAddressList:function(){var t=this;return this.loaded=!1,Object(o["a"])().then(function(e){t.addressList=e.filter(function(t){if(0===t.poi_type&&"0"!==t.st_geohash)return t.geohash=t.st_geohash,!0}),t.loaded=!0,t.addressList.length||t.$refs.input.focus()})},search:function(t){var e=this;t&&Object(o["w"])({keyword:t,latitude:this.currentCity.latitude,longitude:this.currentCity.longitude}).then(function(t){e.results=t})},select:function(t){if(!t)throw new TypeError("select() expect an object as argument but got undefeind");if(this.query="",!t.latitude||!t.longitude){var e=g.decode(t.geohash);t=Object(a["a"])({},t,{latitude:e.latitude,longitude:e.longitude}),b&&console.log("parse geohash to:",e)}var i="st_geohash"in t?t.address:t.name;this.$store.commit("SET_LOCATION_NAME",i),this.$store.commit("SET_CITY_ID",t.city_id),this.$store.commit("SAVE_LOCATION",{latitude:t.latitude,longitude:t.longitude,geohash:t.geohash}),this.onBack()},selectCurrentAddress:function(){this.currentAddress.valid&&this.select(this.currentAddress)},reLocate:function(){var t=this;return b&&console.log("reLocate"),this.reloading=!0,this.currentAddress.name="正在定位...",this.currentAddress.valid=!1,this.getCurrentPosition().then(function(e){var i=e.coords;return b&&console.log("定位成功"),t.currentAddress=Object(a["a"])({},t.currentAddress,{latitude:i.latitude,longitude:i.longitude}),t.reverseGeoCoding(i).then(function(e){var i=e.name,s=e.geohash,n=e.city_id,r=e.city;b&&console.log("解析成功"),t.currentAddress=Object(a["a"])({},t.currentAddress,{name:i||"未知地址",geohash:s,city_id:n,city:r,valid:!0})},function(){b&&console.log("解析失败"),t.currentAddress.name="未能获取地址",t.currentAddress.geohash=g.encode(i.latitude,i.longitude,12)})},function(e){return b&&console.log("定位失败"),new Promise(function(t){return setTimeout(t,1e3)}).then(function(){if(t.currentAddress=Object(a["a"])({},t.currentAddress,{name:"未能获取地址",latitude:null,longitude:null,geohash:""}),e)throw e})}).then(function(){t.reloading=!1},function(e){if(t.reloading=!1,e)throw e})},onChangeCity:function(t){this.currentCity=Object(a["a"])({},this.currentCity,{latitude:t.latitude,longitude:t.longitude,geohash:g.encode(t.latitude,t.longitude,12),city_id:t.id}),this.$store.commit("SET_CITY_NAME",t.name),this.query&&this.search(this.query)},chooseCity:function(){this.$router.push(this.$route.path+"#city")},onBack:function(){this.$router.push("/")},reverseGeoCoding:o["u"]},Object(r["mapActions"])(["getCityList","getCurrentPosition"]))},x=y,C=(i("418e"),Object(v["a"])(x,s,n,!1,null,"4dd887ce",null));C.options.__file="IndexSelectAddress.vue";e["default"]=C.exports},d2c8:function(t,e,i){var s=i("aae3"),n=i("be13");t.exports=function(t,e,i){if(s(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(n(t))}},da8b:function(t,e,i){"use strict";var s=i("89aa"),n=i.n(s);n.a},e47d:function(t,e,i){},e545:function(t,e,i){},e6d9:function(t,e,i){t.exports=i.p+"img/backtop.50da3c17.svg"},e933:function(t,e,i){},eb3a:function(t,e,i){"use strict";var s=i("5e71"),n=i.n(s);n.a},f13c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-namespace b-namespace__box"},[i("span",[t._v("IndexAddressEdit")])])}],a=(i("7f7f"),!1),r={name:"IndexAddressEdit",components:{},props:{},data:function(){return{}},computed:{},created:function(){a&&(window[this.$options.name]=this)},methods:{}},o=r,l=i("2877"),c=Object(l["a"])(o,s,n,!1,null,null,null);c.options.__file="IndexAddressEdit.vue";e["default"]=c.exports},f44b:function(t,e,i){"use strict";var s=i("e47d"),n=i.n(s);n.a},f6b6:function(t,e,i){t.exports=i.p+"img/stars-gray.b7cbf04a.svg"}}]);
//# sourceMappingURL=Index.a7f65c7d.js.map