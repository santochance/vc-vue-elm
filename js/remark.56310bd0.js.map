{"version":3,"sources":["webpack:///./src/views/Checkout/Remark.vue?5d4b","webpack:///./src/views/Checkout/Remark.vue?77e7","webpack:///src/views/Checkout/Remark.vue","webpack:///./src/views/Checkout/Remark.vue?264f","webpack:///./src/views/Checkout/Remark.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_8_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Remark_vue_vue_type_style_index_0_id_bdd188da_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","attrs","title","directives","name","rawName","value","expression","placeholder","maxlength","domProps","on","input","$event","target","composing","inputedRemark","_l","remarkList","option","i","key","staticClass","item","j","class","switch-item_selected","selectedRemarks","click","stopPropagation","preventDefault","select","_v","_s","_e","submit","staticRenderFns","Remarkvue_type_script_lang_js_","components","Page","data","computed","Object","objectSpread","vuex_esm","created","_this","payload","cartId","sig","restaurantId","currentRestaurantId","api","then","SAVE_REMARK_LIST","Promise","resolve","usedRemark","inputed","selected","methods","remarkOption","undefined","splice","toConsumableArray","SAVE_USED_REMARK","$router","go","Checkout_Remarkvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"wJAAmnBA,EAAA,4CCAnnB,IAAAC,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,QAAkBE,OAAOC,MAAA,UAAgBH,EAAA,WAAAA,EAAA,YAA+BI,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAX,EAAA,cAAAY,WAAA,kBAAoFN,OAASO,YAAA,oBAAAC,UAAA,OAAoDC,UAAWJ,MAAAX,EAAA,eAA4BgB,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCpB,EAAAqB,cAAAH,EAAAC,OAAAR,WAAwCX,EAAA,WAAAI,EAAA,MAAAJ,EAAAsB,GAAAtB,EAAAuB,WAAA,iBAAAC,EAAAC,GAA+E,OAAArB,EAAA,OAAiBsB,IAAAD,EAAAE,YAAA,UAA2B3B,EAAAsB,GAAA,WAAAM,EAAAC,GAAkC,OAAAzB,EAAA,QAAkBsB,IAAAG,EAAAF,YAAA,cAAAG,OAAuCC,uBAAA/B,EAAAgC,gBAAAP,IAAAI,KAAA7B,EAAAgC,gBAAAP,IAAgFT,IAAKiB,MAAA,SAAAf,GAAyBA,EAAAgB,kBAAyBhB,EAAAiB,iBAAwBnC,EAAAoC,OAAAX,EAAAI,EAAAD,OAAyB5B,EAAAqC,GAAArC,EAAAsC,GAAAV,YAA4B5B,EAAAuC,OAAAnC,EAAA,UAA2BuB,YAAA,aAAAX,IAA6BiB,MAAA,SAAAf,GAA0E,OAAjDA,EAAAgB,kBAAyBhB,EAAAiB,iBAAwBnC,EAAAwC,OAAAtB,OAA4BlB,EAAAqC,GAAA,WAC1hCI,iECyBAC,GACAjC,KAAA,SACAkC,YACAC,OAAA,MAEAC,KALA,WAMA,OACAxB,cAAA,GACAW,qBAGAc,SAAAC,OAAAC,EAAA,KAAAD,IACAA,OAAAE,EAAA,KAAAF,EACA,aACA,aACA,SACA,MACA,yBAGAG,QApBA,WAoBA,IAAAC,EAAAlD,KACA,IAAAA,KAAAsB,WAAA,CACA,IAAA6B,GACAC,OAAApD,KAAAoD,OACAC,IAAArD,KAAAqD,IACAC,aAAAtD,KAAAuD,qBAEA,OAAAT,OAAAU,EAAA,KAAAV,CAAAK,GAAAM,KAAA,SAAAnC,GACA4B,EAAAQ,iBAAApC,KAGAqC,QAAAC,UAAAH,KAAA,WACA,IAAAI,EAAAX,EAAAW,WACAA,IACAX,EAAA9B,cAAAyC,EAAAC,QACAZ,EAAAnB,gBAAA8B,EAAAE,aAIAC,QAAAlB,OAAAC,EAAA,KAAAD,IACAA,OAAAE,EAAA,KAAAF,EACA,yCAEAX,OAJA,SAIAX,EAAAI,EAAAlB,GACA,IAAAuD,EAAAjE,KAAA+B,gBAAAP,YACA0C,GAAAD,EAAArC,GACAqC,EAAAE,OAAAvC,EAAA,IAEAqC,KACAA,EAAArC,GAAAlB,GAEAV,KAAA+B,gBAAAP,GAAAyC,EACAjE,KAAA+B,gBAAAe,OAAAsB,EAAA,KAAAtB,CAAA9C,KAAA+B,kBASAQ,OAtBA,WAuBAvC,KAAAqE,kBAAAP,QAAA9D,KAAAoB,cAAA2C,SAAA/D,KAAA+B,kBACA/B,KAAAsE,QAAAC,IAAA,OCzFsRC,EAAA,0BCQtRC,EAAA3B,OAAA4B,EAAA,KAAA5B,CACA0B,EACA1E,EACA0C,GACA,EACA,KACA,WACA,MAIAiC,EAAAE,QAAAC,OAAA,aACAC,EAAA,WAAAJ","file":"js/remark.56310bd0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remark.vue?vue&type=style&index=0&id=bdd188da&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remark.vue?vue&type=style&index=0&id=bdd188da&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{attrs:{\"title\":\"订单备注\"}},[_c('section',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputedRemark),expression:\"inputedRemark\"}],attrs:{\"placeholder\":\"填写额外对餐厅和骑手小哥备注的信息\",\"maxlength\":\"100\"},domProps:{\"value\":(_vm.inputedRemark)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputedRemark=$event.target.value}}}),(_vm.remarkList)?_c('div',_vm._l((_vm.remarkList.remarks),function(option,i){return _c('div',{key:i,staticClass:\"switch\"},_vm._l((option),function(item,j){return _c('span',{key:j,staticClass:\"switch-item\",class:{ 'switch-item_selected': _vm.selectedRemarks[i] && j in _vm.selectedRemarks[i] },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.select(i, j, item)}}},[_vm._v(_vm._s(item))])}))})):_vm._e()]),_c('button',{staticClass:\"submit-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.submit($event)}}},[_vm._v(\"确定\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <page title=\"订单备注\">\r\n    <section>\r\n      <textarea v-model=\"inputedRemark\" placeholder=\"填写额外对餐厅和骑手小哥备注的信息\" maxlength=\"100\"></textarea>\r\n      <div v-if=\"remarkList\">\r\n        <div v-for=\"(option, i) in remarkList.remarks\" :key=\"i\"\r\n          class=\"switch\"\r\n        >\r\n          <span v-for=\"(item, j) in option\" :key=\"j\"\r\n            class=\"switch-item\"\r\n            :class=\"{ 'switch-item_selected': selectedRemarks[i] && j in selectedRemarks[i] }\"\r\n            @click.stop.prevent=\"select(i, j, item)\"\r\n          >{{ item }}</span>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <button class=\"submit-btn\" @click.stop.prevent=\"submit\">确定</button>\r\n  </page>\r\n</template>\r\n\r\n<script>\r\n  import { mapState, mapMutations } from 'vuex'\r\n  import { fetchRemarkList } from '@/service/api'\r\n\r\n  import Page from '@/components/Page'\r\n\r\n  export default {\r\n    name: 'Remark',\r\n    components: {\r\n      Page,\r\n    },\r\n    data () {\r\n      return {\r\n        inputedRemark: '',\r\n        selectedRemarks: []\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState([\r\n        'remarkList',\r\n        'usedRemark',\r\n        'cartId',\r\n        'sig',\r\n        'currentRestaurantId',\r\n      ]),\r\n    },\r\n    created() {\r\n      if (!this.remarkList) {\r\n        const payload = {\r\n          cartId: this.cartId,\r\n          sig: this.sig,\r\n          restaurantId: this.currentRestaurantId,\r\n        }\r\n        return fetchRemarkList(payload).then(remarkList => {\r\n          this.SAVE_REMARK_LIST(remarkList)\r\n        })\r\n      }\r\n      Promise.resolve().then(() => {\r\n        const usedRemark = this.usedRemark\r\n        if (usedRemark) {\r\n          this.inputedRemark = usedRemark.inputed\r\n          this.selectedRemarks = usedRemark.selected\r\n        }\r\n      })\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'SAVE_REMARK_LIST', 'SAVE_USED_REMARK'\r\n      ]),\r\n      select(i, j, value) {\r\n        let remarkOption = this.selectedRemarks[i] || []\r\n        if (remarkOption[j] != undefined) {\r\n          remarkOption.splice(j, 1)\r\n        } else {\r\n          remarkOption = []\r\n          remarkOption[j] = value\r\n        }\r\n        this.selectedRemarks[i] = remarkOption\r\n        this.selectedRemarks = [ ...this.selectedRemarks ]\r\n      },\r\n      // extract() {\r\n      //   return this.selectedRemarks\r\n      //     .map(v => v.join(''))\r\n      //     .concat(this.inputedRemark)\r\n      //     .filter(v => v)\r\n      //     .join(',')\r\n      // },\r\n      submit() {\r\n        this.SAVE_USED_REMARK({ inputed: this.inputedRemark, selected: this.selectedRemarks })\r\n        this.$router.go(-1)\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  section {\r\n    padding: 32px;\r\n    margin: 16px 0;\r\n    background-color: #fff;\r\n  }\r\n  textarea {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 224px;\r\n    margin-bottom: 32px;\r\n    padding: 32px;\r\n    border: 1px solid #ccc; /* no */\r\n    border-radius: 5px;\r\n    font-size: 28px;\r\n    background-color: #f9f9f9;\r\n    color: #666;\r\n    resize: none;\r\n  }\r\n  .switch {\r\n    overflow: hidden;\r\n    display: inline-block;\r\n    margin: 0 20px 20px 0;\r\n    font-size: 26px;\r\n    border: 1px solid #ddd; /* no */\r\n    border-radius: 8px;\r\n  }\r\n  .switch-item {\r\n    display: inline-block;\r\n    padding: 0 16px;\r\n    height: 60px;\r\n    line-height: 60px;\r\n    text-align: center;\r\n    color: #666;\r\n\r\n    &:after {\r\n      content: '';\r\n      position: relative;\r\n      left: 17px;\r\n      display: inline-block;\r\n      width: 1px; /* no */\r\n      height: 30px;\r\n      line-height: 60px;\r\n      vertical-align: middle;\r\n      background-color: #ddd;\r\n    }\r\n    &:last-child:after {\r\n      display: none;\r\n    }\r\n  }\r\n  .switch-item_selected {\r\n    background-color: #0186ff;\r\n    color: #fff;\r\n    &:after {\r\n      background-color: #0186ff;\r\n    }\r\n  }\r\n  .submit-btn {\r\n    box-sizing: border-box;\r\n    display: block;\r\n    width: 92%;\r\n    margin: 32px auto 0;\r\n    padding: 26px;\r\n    border-radius: 4px;\r\n    font-size: 32px;\r\n    background-color: #00e067;\r\n    color: #fff;\r\n    opacity: .98;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remark.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remark.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Remark.vue?vue&type=template&id=bdd188da&scoped=true&\"\nimport script from \"./Remark.vue?vue&type=script&lang=js&\"\nexport * from \"./Remark.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Remark.vue?vue&type=style&index=0&id=bdd188da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdd188da\",\n  null\n  \n)\n\ncomponent.options.__file = \"Remark.vue\"\nexport default component.exports"],"sourceRoot":""}