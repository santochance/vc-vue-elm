(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["confirm-order"],{"4f54":function(t,e,s){"use strict";var a=s("d7a5"),i=s.n(a);i.a},"716e":function(t,e){t.exports="data:image/png;base64,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"},d7a5:function(t,e,s){},f716:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",{attrs:{title:"确认订单",loading:t.loading}},[t.checkout?a("div",{staticClass:"checkout-body"},[a("section",{staticClass:"cart-address",on:{click:t.selectAddr}},[t.selectedAddress?a("div",{staticClass:"cart-address__item"},[a("div",{staticClass:"cart-address__title"},[a("span",[t._v("订单配送至")]),t.selectedAddress.tag_type?a("span",{staticClass:"cart-address__address-tag"},[t._v(t._s({1:"家",2:"公司",3:"学校"}[t.selectedAddress.tag_type]))]):t._e()]),a("div",{staticClass:"cart-address__address-detail"},[a("span",{staticClass:"ellipsis"},[t._v(t._s(t.selectedAddress.address+t.selectedAddress.address_detail))]),a("svg",[a("use",{attrs:{"xlink:href":"#arrow-right-bold"}})])]),a("div",{staticClass:"cart-address__address-name"},[a("span",[t._v(t._s(t.selectedAddress.name))]),a("span",[t._v("("+t._s(1===t.selectedAddress.sex?"先生":"女士")+")")]),a("span",{staticClass:"cart-address__address-phone"},[t._v(t._s(t.selectedAddress.phone))])])]):a("div",{staticClass:"cart-address__item"},[a("div",{staticClass:"cart-address__title"},[a("span",[t._v("订单配送至")])]),a("div",{staticClass:"cart-address__address-detail"},[a("span",{staticClass:"ellipsis"},[t._v("马上选择地址")]),a("svg",[a("use",{attrs:{"xlink:href":"#arrow-right-bold"}})])])])]),a("section",{staticClass:"checkout-section"},[a("div",{staticClass:"checkout-item delivery"},[a("div",{staticClass:"delivery__left"},[a("div",{staticClass:"checkout-item__title"},[a("span",[t._v("送达时间")])]),a("div",{staticClass:"delivery__delivery-type"},[a("span",[t._v(t._s(t.checkout.cart&&t.checkout.cart.restaurant&&t.checkout.cart.restaurant.delivery_type.name))])])]),a("div",{staticClass:"delivery__right"},[a("div",{staticClass:"delivery__select"},[a("span",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.deliverTimesVisible=!0}}},[t._v("\n               "+t._s(""===t.selectedDeliverDateTime?"选择送达时间":t.selectedDeliverDateTime)+"\n             ")]),a("svg",[a("use",{attrs:{"xlink:href":"#arrow-right"}})])])])]),a("div",{staticClass:"checkout-item pay-method"},[a("div",{staticClass:"checkout-item__title"},[a("span",[t._v("支付方式")])]),a("div",{staticClass:"pay-method__text"},[a("span",[t._v(t._s(t.checkout.pay_methods[0].name))])])])]),a("section",{staticClass:"checkout-section cart-group"},[a("div",{staticClass:"cart-group__header"},[a("span",{staticClass:"cart-group__shop-name"},[t._v(t._s(t.shopName.split(/[()（）]/)[0]))]),a("span",{staticClass:"cart-group__branch-name"},[t._v("("+t._s(t.shopName.split(/[()（）]/)[1])+")")])]),a("ul",{staticClass:"cart-group__list"},t._l(t.entities,function(e){return a("li",{key:e.id+e.attrs,staticClass:"checkout-item food-item"},[a("div",{staticClass:"food-item__img"},[a("img",{attrs:{src:t.$getImage(e.image_hash,t.foodImgParam),alt:""}})]),a("div",{staticClass:"food-item__info"},[a("div",{staticClass:"food-item__name ellipsis"},[t._v(t._s(e.name))]),a("div",{staticClass:"food-item__attr"},t._l(e.attrs,function(e,s){return a("span",{key:s},[t._v(t._s(e.value))])}))]),a("div",{staticClass:"food-item__quantity"},[t._v("× "+t._s(e.quantity))]),a("div",{staticClass:"food-item__price"},[t._v(t._s(t._f("toPrice")(e.quantity*e.price)))])])})),a("div",{staticClass:"checkout-item cart-group__item"},[a("div",[a("span",{staticClass:"cart-group__tag cart-group__packing-fee"},[t._v(t._s(t.checkout.cart.extra.packing_fee.icon.name))]),a("span",{staticClass:"cart-group__item-title ellipsis"},[t._v(t._s(t.checkout.cart.extra.packing_fee.name))])]),a("div",{staticClass:"cart-group__price"},[t._v(t._s(t._f("toPrice")(t.checkout.cart.extra.packing_fee.price)))])]),a("div",{staticClass:"checkout-item cart-group__item"},[a("div",[a("span",{staticClass:"cart-group__tag cart-group__agent-fee"},[t._v(t._s(t.checkout.cart.extra.agent_fee.icon.name))]),a("span",{staticClass:"cart-group__item-title ellipsis"},[t._v(t._s(t.checkout.cart.extra.agent_fee.name))])]),a("div",{staticClass:"cart-group__price"},[t._v(t._s(t._f("toPrice")(t.checkout.cart.extra.agent_fee.price)))])]),a("div",{staticClass:"checkout-item cart-group__discount"},[t._v("新用户立减与其他优惠不能同享")]),a("div",{staticClass:"checkout-item cart-group__item"},[a("div",{staticClass:"cart-group__item-title"},[t._v("红包")]),a("div",{staticClass:"cart-group__hongbao"},[a("svg",[a("use",{attrs:{"xlink:href":"#red-packet"}})]),a("span",[t._v(t._s(t.checkout.hongbao_info.status_text))])])]),a("div",{staticClass:"checkout-item cart-group__footer"},[a("a",{staticClass:"cart-group__discount-intro",attrs:{href:"javascript:"}},[a("span",[t._v("优惠说明")]),a("svg",[a("use",{attrs:{"xlink:href":"#tip"}})])]),a("div",{staticClass:"cart-group__total-price-wrap"},[a("span",[t._v("小计 ¥")]),a("span",{staticClass:"cart-group__total-price"},[t._v(t._s(t._f("toPrice")(t.mockTotalPrice)))])])])]),a("section",{staticClass:"checkout-section checkout-misc"},[a("div",{staticClass:"checkout-item checkout-misc__tableware",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.tablewareVisible=!0}}},[a("span",[t._v("餐具份数")]),a("a",{staticClass:"checkout-misc__content",attrs:{href:"javascript:"}},[""===t.selectedTableware?a("span",{staticClass:"checkout-misc__tableware_unselected"},[t._v("\n             未选择")]):"0"===t.selectedTableware?a("span",{staticClass:"checkout-misc__tableware_selected"},[t._v("\n             无需餐具")]):a("span",{staticClass:"checkout-misc__tableware_selected"},[t._v("\n             "+t._s(t.selectedTableware)+"餐具")]),a("svg",[a("use",{attrs:{"xlink:href":"#arrow-right"}})])]),a("div",{staticClass:"checkout-misc__slogan"},[a("img",{attrs:{src:s("716e"),alt:""}}),a("span",[t._v("马上助力环保")])])]),a("div",{staticClass:"checkout-item",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.inputRemark(e)}}},[t.remarkText?a("span",{staticClass:"checkout-misc__remark"},[t._v(t._s(t.remarkText))]):a("span",[t._v("订单备注")]),a("a",{staticClass:"checkout-misc__content",attrs:{href:"javascript:"}},[t.remarkText?t._e():a("span",[t._v("口味、偏好")]),a("svg",[a("use",{attrs:{"xlink:href":"#arrow-right"}})])])]),a("div",{staticClass:"checkout-item"},[a("span",[t._v("发票信息")]),a("span",{staticClass:"checkout-misc__content"},[t._v("商家不支持开发票")])])])]):t._e(),a("footer",{staticClass:"action-bar"},[a("span",{staticClass:"action-bar__total-price"},[t._v("¥"+t._s(t._f("toPrice")(t.mockTotalPrice)))]),a("a",{staticClass:"action-bar__submit-btn",attrs:{href:"javascript:"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[t._v("去支付")])]),a("modal",{attrs:{visible:t.deliverTimesVisible,panel:"bottom",closable:!1},on:{close:function(e){t.deliverTimesVisible=!1}}},[t.checkout?a("div",{staticClass:"deliver-times__container"},[a("h3",{staticClass:"deliver-times__head"},[t._v("选择送达时间")]),a("div",{staticClass:"deliver-times__content"},[a("nav",{staticClass:"deliver-times__tabs"},t._l(t.checkout.deliver_times,function(e,s){return a("div",{key:e.tab,staticClass:"deliver-times__tab",class:{"deliver-times__tab_active":t.activeDeliverDayIdx===s},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.activeDeliverDayIdx=s}}},[t._v(t._s(e.tab))])})),a("ul",{staticClass:"deliver-times__panels"},[t._l(t.checkout.deliver_times,function(e,s){return t.activeDeliverDayIdx===s?t._l(e.time_points,function(s){return a("li",{key:s.time,staticClass:"deliver-times__panel",on:{click:function(a){a.stopPropagation(),a.preventDefault(),t.selectDeliverTime(e,s)}}},[a("span",{staticClass:"deliver-times__time"},[t._v(t._s(s.time))]),a("span",{staticClass:"deliver-times__description"},[t._v("（"+t._s(s.delivery_fee_description)+"）")]),t.selectedDeliverDateTime===e.tab+s.time?a("svg",[a("use",{attrs:{"xlink:href":"#select"}})]):t._e()])}):t._e()})],2)])]):t._e()]),a("modal",{attrs:{visible:t.tablewareVisible,panel:"bottom"},on:{close:function(e){t.tablewareVisible=!1}}},[a("div",{staticClass:"tableware__container"},[a("h2",{staticClass:"tableware__head"},[t._v("餐具份数")]),a("ul",{staticClass:"tableware__list"},[a("li",{key:0,staticClass:"tableware__item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.selectTableware("0")}}},[a("img",{attrs:{src:s("716e"),alt:""}}),a("span",[t._v("无需餐具")])]),t._l(10,function(e){return a("li",{key:e,staticClass:"tableware__item",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.selectTableware(e+"份")}}},[t._v(t._s(e)+"\n         ")])}),a("li",{key:11,staticClass:"tableware__item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.selectTableware("10份以上")}}},[t._v("10份以上")])],2)])])],1)},i=[],c=(s("a481"),s("7f7f"),s("c93e")),r=s("2f62"),l=s("408b"),n=s("d50a"),o=s("4579"),d={name:"ConfirmOrder",components:{Tag:n["c"],Modal:n["a"],Toast:n["d"],Page:o["a"]},props:{},filters:{toPrice:function(t){return(t||0).toFixed(1)}},data:function(){return{loading:!1,checkout:null,tablewareVisible:!1,selectedTableware:"",deliverTimesVisible:!1,activeDeliverDayIdx:0,selectedDeliverDateTime:"",verifyFailedMsg:"",foodImgParam:"?imageMogr/format/webp/thumbnail/!72x72r/gravity/Center/crop/72x72/"}},computed:Object(c["a"])({},Object(r["e"])({restaurantId:"currentRestaurantId",entities:function(t){return(t.cartMap[this.restaurantId]||{}).entities||[]},mockTotalPrice:function(){return this.entities.reduce(function(t,e){return t+e.price*e.quantity},0)}}),Object(r["c"])(["selectedAddress","remarkText"]),{shopName:function(){var t=this.checkout;return t.cart&&t.cart.restaurant&&t.cart.restaurant.name||""}}),created:function(){if(!this.restaurantId||!this.entities.length)return this.$router.replace("/shop");this.doCheckout()},methods:{doCheckout:function(){var t=this,e=this.$store.state,s=e.userId,a=e.selectedAddressId,i={userId:s,restaurantId:this.restaurantId,addressId:a,entities:this.entities,deliverTime:this.selectedDeliverDateTime,tableware:this.selectedTableware,remark:this.remarkText};return this.loading=!0,Object(l["w"])(i).then(function(e){t.checkout=e,t.loading=!1})},submit:function(){this.verify()},verify:function(){return this.selectedAddress?this.selectedDeliverDateTime?this.verifyFailedMsg="":(n["d"].open({content:"请选择送达时间！",mask:!1}),this.verifyFailedMsg="请选择送达时间！"):(n["d"].open({content:"请选择配送地址！",mask:!1}),this.verifyFailedMsg="请选择配送地址！")},selectAddr:function(){this.$router.push(this.$route.path+"/address")},selectDeliverTime:function(t,e){this.selectedDeliverDateTime=t.tab+e.time,this.deliverTimesVisible=!1,this.refresh()},selectTableware:function(t){this.selectedTableware=t,this.tablewareVisible=!1,this.refresh()},inputRemark:function(){this.$router.push(this.$route.path+"/remark")},refresh:function(){this.verifyFailedMsg=""}},watch:{selectedAddress:function(){this.doCheckout()},selectedDeliverDateTime:function(){this.doCheckout()},selectedTableware:function(){this.doCheckout()},remarkText:function(){this.doCheckout()}}},_=d,u=(s("4f54"),s("2877")),v=Object(u["a"])(_,a,i,!1,null,"5b8fd13e",null);v.options.__file="ConfirmOrder.vue";e["default"]=v.exports}}]);
//# sourceMappingURL=confirm-order.2f3987f8.js.map