(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Profile"],{"0311":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page",{attrs:{title:"账户信息"}},[s("router-view")],1)},i=[],n=s("4579"),o={name:"ProfileInfo",components:{Page:n["a"]},props:{},data:function(){return{}}},r=o,l=s("2877"),u=Object(l["a"])(r,a,i,!1,null,null,null);u.options.__file="ProfileInfo.vue";t["default"]=u.exports},"122c":function(e,t,s){},"2a6f":function(e,t,s){},"2dd3":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Address",{attrs:{title:"我的地址",mode:"normal",addressList:e.addressList}})},i=[],n=(s("4917"),s("c8a9")),o=s("408b"),r={name:"ProfileAddress",components:{Address:n["a"]},props:{},data:function(){return{addressList:[]}},beforeRouteEnter:function(e,t,s){if(!t.path.match(/\/(profile|login)/))return s("/profile");s()},created:function(){var e=this;Object(o["a"])().then(function(t){e.addressList=t,e.SAVE_ADDRESS_LIST(t)})}},l=r,u=(s("b134"),s("2877")),c=Object(u["a"])(l,a,i,!1,null,"008841be",null);c.options.__file="ProfileAddress.vue";t["default"]=c.exports},"3c00":function(e,t,s){},"413b":function(e,t,s){},"420d":function(e,t,s){},"4c6c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"username__block"},[s("div",{staticClass:"username__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username__input",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"username__submit-wrap"},[s("div",{staticClass:"username__submit-desc"},[e._v("用户名只能修改一次（5-24个字）")]),s("button",{staticClass:"username__submit-btn",attrs:{disabled:!e.username},on:{click:function(t){e.username&&!e.processing&&e.onSubmit()}}},[e._v("确认修改"),e.processing?s("span",[e._v("加载中...")]):e._e()])])])},i=[],n=s("408b"),o={name:"ProfileInfoUsername",components:{},props:{},data:function(){return{username:"",processing:!1}},methods:{onSubmit:function(){var e=this;this.$emit("submit");var t=this.$store.state;Object(n["v"])({userId:t.userId,username:this.username}).then(function(){e.processing=!1})}}},r=o,l=(s("f10b"),s("2877")),u=Object(l["a"])(r,a,i,!1,null,"b55e8d9e",null);u.options.__file="ProfileInfoUsername.vue";t["default"]=u.exports},"622c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page",{staticClass:"b-moile__block",attrs:{title:"换绑手机"}},[s("div",{staticClass:"b-mobile__form-group"},[s("div",{staticClass:"b-mobile__form-item"},[s("label",{staticClass:"b-mobile__control-label"},[e._v("手机号")]),s("input",{staticClass:"b-mobile__input",attrs:{type:"text",readonly:"",maxlength:"11"},domProps:{value:e._f("mobileMask")(e.mobile)}}),s("button",{staticClass:"b-mobile__form-button b-mobile__btn-code"},[e._v("获取验证码")])]),s("div",{staticClass:"b-mobile__form-item"},[s("label",{staticClass:"b-mobile__control-label"},[e._v("验证码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"b-mobile__input",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})])]),s("div",{staticClass:"b-mobile__submit-wrap"},[s("button",{staticClass:"b-mobile__form-button b-modile__btn-sumbit"},[e._v("验证后绑定新手机")])])])},i=[],n=s("c93e"),o=s("5880"),r=s("4579"),l={name:"ProfileRebindMobile",components:{Page:r["a"]},props:{},data:function(){return{code:""}},computed:Object(n["a"])({},Object(o["mapState"])({mobile:function(e){return e.user&&e.user.mobile||""}}))},u=l,c=(s("802f"),s("2877")),d=Object(c["a"])(u,a,i,!1,null,"cd4f9ee2",null);d.options.__file="ProfileRebindMobile.vue";t["default"]=d.exports},"6b4a":function(e,t,s){"use strict";var a=s("3c00"),i=s.n(a);i.a},"712a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"password__block"},[s("div",{staticClass:"password__wrap"},[s("div",{staticClass:"password__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword.value,expression:"oldPassword.value"}],attrs:{type:"password",placeholder:"旧密码"},domProps:{value:e.oldPassword.value},on:{blur:function(t){e.validate({setFeedback:!0})},input:[function(t){t.target.composing||e.$set(e.oldPassword,"value",t.target.value)},function(t){e.validate()}]}}),e.oldPassword.feedback?s("span",{staticClass:"password__feedback"},[e._v(e._s(e.oldPassword.feedback))]):e._e()]),s("div",{staticClass:"password__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword.value,expression:"newPassword.value"}],attrs:{type:"password",placeholder:"新密码"},domProps:{value:e.newPassword.value},on:{blur:function(t){e.validate({setFeedback:!0})},input:[function(t){t.target.composing||e.$set(e.newPassword,"value",t.target.value)},function(t){e.validate()}]}}),e.newPassword.feedback?s("span",{staticClass:"password__feedback"},[e._v(e._s(e.newPassword.feedback))]):e._e()]),s("div",{staticClass:"password__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatedPassword.value,expression:"repeatedPassword.value"}],attrs:{type:"password",placeholder:"确认密码"},domProps:{value:e.repeatedPassword.value},on:{blur:function(t){e.validate({setFeedback:!0})},input:[function(t){t.target.composing||e.$set(e.repeatedPassword,"value",t.target.value)},function(t){e.validate({setFeedback:!0})}]}}),e.repeatedPassword.feedback?s("span",{staticClass:"password__feedback"},[e._v(e._s(e.repeatedPassword.feedback))]):e._e()])]),s("div",{staticClass:"password__submit-wrap"},[s("button",{staticClass:"password__submit-btn",attrs:{disabled:e.submitDisabled}},[e._v("确认并保存")])])])},i=[],n=(s("ac6a"),s("c665")),o=s("aa9a"),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n["a"])(this,e),this.options=t,this.rules=t.rules,this.value=t.value||"",this.feedback=t.feedback||""}return Object(o["a"])(e,[{key:"validate",value:function(e){var t=this,s=(e||{}).setFeedback,a=this.value;this.rules.forEach(function(e){t.valid=e.validator(a),s&&(t.feedback=t.valid?"":e.message)})}}]),e}(),l={name:"ProfileInfoPassword",components:{},props:{},data:function(){var e=this;return{oldPassword:new r({rules:[{validator:function(e){return!e||e.length>=6&&e.length<=20},message:"密码长度为 6 - 20位"}]}),newPassword:new r({rules:[{validator:function(e){return!e||e.length>=6&&e.length<=20},message:"密码长度为 6 - 20位"}]}),repeatedPassword:new r({rules:[{validator:function(t){var s=e.newPassword.value;return!t||!s||t===s},message:"两次密码输入不一致"}]})}},computed:{submitDisabled:function(){return!(this.oldPassword.value&&this.newPassword.value&&this.repeatedPassword.value&&this.oldPassword.valid&&this.newPassword.valid&&this.repeatedPassword.valid)}},methods:{validate:function(){var e,t,s;(e=this.oldPassword).validate.apply(e,arguments),(t=this.newPassword).validate.apply(t,arguments),(s=this.repeatedPassword).validate.apply(s,arguments)}}},u=l,c=(s("7bda"),s("2877")),d=Object(c["a"])(u,a,i,!1,null,"867e13d0",null);d.options.__file="ProfileInfoPassword.vue";t["default"]=d.exports},"7bda":function(e,t,s){"use strict";var a=s("2a6f"),i=s.n(a);i.a},"802f":function(e,t,s){"use strict";var a=s("420d"),i=s.n(a);i.a},"87ad":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user?s("div",{staticClass:"info__block"},[s("div",{staticClass:"info__group"},[s("div",{staticClass:"info__item info__avatar"},[s("b",[e._v("头像")]),s("span",{staticClass:"info__item-right info__avatar-right"},[s("input",{staticClass:"info__avatar-file",attrs:{type:"file",accept:"image/jpeg, image/jpg, image/png"}}),s("span",{staticClass:"info__avatar-value",style:{backgroundPosition:"0 "+e.$toRem(e.avatarPos)}}),s("span",[s("svg",[s("use",{attrs:{"xlink:href":"#arrow"}})])])])]),s("router-link",{staticClass:"info__item",attrs:{to:"/profile/info/username"}},[s("b",[e._v("用户名")]),s("span",[s("span",[e._v(e._s(e.user.username))]),s("span",{staticClass:"info__item-right"},[s("svg",[s("use",{attrs:{"xlink:href":"#arrow"}})])])])])],1),s("div",{staticClass:"info__group-title"},[e._v("账号绑定")]),s("div",{staticClass:"info__group"},[s("router-link",{staticClass:"info__item",attrs:{to:"/profile/rebind"}},[s("span",[s("i",{staticClass:"info__phone-icon"},[s("svg",[s("use",{attrs:{"xlink:href":"#info-mobile"}})])]),s("b",[e._v("手机")])]),s("span",{staticClass:"info__item-right"},[s("span",[e._v(e._s(e._f("mobileMask")(e.user.mobile)))]),s("span",[s("svg",[s("use",{attrs:{"xlink:href":"#arrow"}})])])])])],1),s("div",{staticClass:"info__group-title"},[e._v("安全设置")]),s("div",{staticClass:"info__group"},[s("router-link",{staticClass:"info__item",attrs:{to:"/profile/info/password"}},[s("span",[e._v("登录密码")]),s("span",{staticClass:"info__item-right"},[s("span",{staticClass:"info__password-value"},[e._v("未设置")]),s("span",[s("svg",[s("use",{attrs:{"xlink:href":"#arrow"}})])])])])],1),s("div",{staticClass:"info__group"},[s("button",{staticClass:"info__btn-logout",on:{click:e.onLogout}},[e._v("退出登录")])])]):e._e()},i=[],n=(s("a481"),s("c93e")),o=s("5880"),r=s("408b"),l={name:"ProfileInfoMain",components:{},props:{},data:function(){return{extraProfile:null}},created:function(){this.loadData()},activated:function(){this.loadData()},computed:Object(n["a"])({},Object(o["mapState"])(["user"]),{avatarPos:function(){return 120*this.random(0,6)}}),methods:Object(n["a"])({loadData:function(){var e=this;this.fetchCurrentUser().then(function(t){var s=t.user_id;s&&Object(r["m"])({user_id:s}).then(function(t){e.extraProfile=t})})}},Object(o["mapActions"])(["fetchCurrentUser","fetchUser","logout"]),{onLogout:function(){var e=this,t={user_id:this.user.user_id};return this.logout({payload:t}).then(function(){e.$router.replace("/profile")})},random:function(e,t){return Math.floor(e+Math.random()*(t-e))}})},u=l,c=(s("6b4a"),s("2877")),d=Object(c["a"])(u,a,i,!1,null,"35a377d8",null);d.options.__file="ProfileInfoMain.vue";t["default"]=d.exports},9937:function(e,t,s){"use strict";var a=s("a877"),i=s.n(a);i.a},a877:function(e,t,s){},b134:function(e,t,s){"use strict";var a=s("413b"),i=s.n(a);i.a},b2d2:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AddressEdit")},i=[],n=(s("4917"),s("fcc1")),o={name:"ProfileAddressEdit",components:{AddressEdit:n["a"]},props:{},data:function(){return{}},beforeRouteEnter:function(e,t,s){if(!t.path.match("/profile/address"))return s("/profile");s(function(e){return function(){var e=this.$store.state.editingAddress;if(!e)return s("/profile")}.call(e)})}},r=o,l=(s("9937"),s("2877")),u=Object(l["a"])(r,a,i,!1,null,"4ae535b6",null);u.options.__file="ProfileAddressEdit.vue";t["default"]=u.exports},f10b:function(e,t,s){"use strict";var a=s("122c"),i=s.n(a);i.a}}]);
//# sourceMappingURL=Profile.3e86083b.js.map